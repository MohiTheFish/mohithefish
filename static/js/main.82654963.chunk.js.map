{"version":3,"sources":["assets/images/dead.png","components/Loading/loading.jsx","pages/testing.jsx","redux-store/actions/nameActions.js","redux-store/reducers/nameReducers.js","redux-store/actions/gameSetupActions.js","redux-store/actions/spyfallActions.js","redux-store/reducers/gameReducers.js","redux-store/actions/mafiaActions.js","redux-store/reducers/playReducers.js","redux-store/reducers/index.js","redux-store/index.js","Games/socketHandlers.js","pages/games.jsx","components/BackToLobby/backToLobby.jsx","Games/Spyfall/spyfall.jsx","Games/Spyfall/index.jsx","Games/Mafia/components/role.jsx","Games/Mafia/components/player.jsx","Games/Mafia/components/eventRecap.jsx","Games/Mafia/components/eventRecapInput.jsx","Games/Mafia/components/roleCount.jsx","Games/Mafia/components/court.jsx","Games/Mafia/mafia.jsx","Games/Mafia/index.jsx","components/BackToGameSelect/backToGameSelect.jsx","Games/WaitingRoom/RoomInfoComponents/myInput.jsx","Games/Settings/submitSettings.jsx","Games/Settings/privateSwitch.jsx","Games/Settings/settingsView.jsx","Games/Settings/MafiaSettings/mafiaView.jsx","Games/Settings/MafiaSettings/mafiaSettings.jsx","Games/Settings/SpyfallSettings/spyfallView.jsx","Games/Settings/SpyfallSettings/spyfallSettings.jsx","Games/Settings/settingsBoard.jsx","Games/Rules/rulesBoard.jsx","Games/WaitingRoom/roomInfo.jsx","Games/WaitingRoom/connectedChoices.jsx","Games/WaitingRoom/waitingRoom.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","Loading","className","MainPage","useState","count","setCount","email","setEmail","number","setNumber","imageName","setImageName","useEffect","a","fetch","method","headers","then","res","json","image","response","document","title","fetchData","onClick","type","value","onChange","e","target","src","alt","setIsConnected","isConnected","storageType","sessionStorage","initialState","process","REACT_APP_DESIGN","username","gamename","isUpdatingName","userId","getItem","uuid","setItem","existUserId","gameCredentials","state","action","Object","assign","game","name","lobbyStates","setIsLoadingRoom","isLoadingRoom","addNameSpyfall","index","data","removeNameSpyfall","defaultSpyfallSettings","time","gameType","defaultMafiaSettings","dayTimeLimit","nightTimeLimit","defenseTimeLimit","numMafia","allowSK","allowJoker","selectedChoice","myIndex","numPlayers","members","spectators","isSpectator","roomId","rooms","isPlaying","isUpdating","settings","isPrivate","spyfall","mafia","gameData","length","newSettings","deletedIndex","newState","filter","m","defaultMafiaState","phase","isRecapPeriod","secondaryTime","role","roleCount","chatHistory","audience","message","playerProfiles","numVotes","isAlive","numAbstain","myTarget","onTrial","isDefending","myGuiltyDecision","numGuilty","numNotGuilty","iAmDead","wasSaved","wasAttacked","defaultSpyfallState","selectedLocations","Map","selectedNamesByIndex","Set","spyIndex","locations","secretLocation","mafiaReducers","gameState","i","push","newTarget","oldTarget","newChatHistory","item","newProfiles","newMafiaState","newDecision","oldDecision","oldChatHistory","map","val","killedIndex","myNewTarget","profile","targetIndex","isMe","events","newPlayerProfiles","forEach","event","wasKilled","spyfallReducers","clonedNames","add","delete","clonedLocations","oldVal","get","set","playState","defaultState","initialGameData","initialGameCredentialState","initialPlayState","customReducer","playStateWithIndex","store","createStore","MohiApp","JSON","parse","myState","loadState","saveState","socket","prevGame","invalidSocket","Error","removePrevEventListeners","newSocket","off","addMafiaEventListeners","on","dispatch","updateMainMafiaTime","secondaryTimeUpdate","chatUpdated","otherPlayerVotedMafia","iVotedMafia","otherPlayerGuiltyVotedMafia","iGuiltyVotedMafia","courtResult","usedPower","privateNightResult","publicNightResult","connectToServer","console","log","uid","getState","io","connect","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","emit","setUserName","roomInfo","roomSettingsUpdated","updateSpyfallTime","addSpyfallEventListeners","startSpyfall","startMafia","setMyIndex","playerLeft","getSpecificGameSettings","smallSettings","getAvailableRooms","ejectFromRoom","joinRoom","targetRoom","trim","startGame","votePlayer","voteGuiltyMafia","decision","allGames","SubscribedGames","gc","setGameInfo","updateMyName","props","setName","Boolean","to","TextField","id","label","variant","helperText","Button","key","color","disabled","goBack","BackToLobby","IconButton","aria-label","getDescriptor","Spyfall","gd","ps","isSpy","getValues","obj","locationSelectHandler","textContent","headerRow","minutes","Math","floor","seconds","toString","padStart","renderTime","addCall","removeCall","isSelected","has","callback","selectClass","getSelectedClassN","getSelectedClassL","ROLES","TeamName","children","RoleName","PowerInfo","WinCondition","RoleCard","isMini","setIsMini","teamName","roleName","powerInfo","winCondition","getRoleDetails","roleInfo","Icon","ExpandMoreIcon","ExpandLessIcon","rwclass","renderInteraction","someoneOnTrial","deadimg","interactMafia","PlayerCard","member","playerClass","SubscribedEventRecap","useLayoutEffect","element","getElementById","scrollHeight","scrollTop","SCROLL_THRESHOLD","scrollTo","messageList","phaseText","interpretPhase","Fragment","messageItem","messageClass","TextInput","setMessage","submit","sendMafiaMessage","FormControl","Input","onKeyPress","which","keyCode","endAdornment","InputAdornment","position","size","onMouseDown","preventDefault","edge","RoleValue","RoleItem","SubscribedRoleCount","roles","mafiaCount","villagerCount","jokerCount","skCount","crazyExCount","SubscribedClock","SubscribedCourt","ownProps","onTrialName","onTrialIndex","notGuiltyClass","guiltyClass","isG","isN","guiltyButtons","Column3","isDay","SubcribedColumn2","SubscribedPlayerList","Column1","Mafia","theme","savedClass","attackedClass","BackToGameSelect","setRoomId","InputLabel","htmlFor","OutlinedInput","labelWidth","SubscribedSubmitSettings","setIsUpdating","isValid","isCreating","createRoomWithSettings","updateRoomSettings","SubscribedPrivateSwitch","handleSwitch","Switch","checked","inputProps","SettingsItem","SettingsName","SettingsValue","SubscribedMafiaView","isValidTimeLimit","test","Number","parseInt","TimeLimit","validTime","setTime","quantity","question","errormsg","explanation","error","SubscribedMafiaSettings","numMembers","num","showPrivacy","isLobbyPrivate","setDayTimeLimit","setNightTimeLimit","setDefenseTimeLimit","setNumMafia","dayTimeMessage","isValidNightTime","isValidDefenseTime","mafiaMessage","allValid","FormHelperText","SubscribedSpyfallView","SubscribedTimeLimit","SubscribedGameTypeSelector","setGameType","Select","MenuItem","SpyfallSettings","isValidTime","SubscribedSettingsBoard","canEdit","GameSettings","undefined","GameView","SpyfallView","MafiaSettings","MafiaView","Paper","renderStatusMessage","renderEditSettings","renderCurrentSettings","SpyfallRules","RulesBoard","SubscribedRoomInfo","Grid","container","spacing","room","hostname","xs","renderAvailableRooms","hostClass","navigator","clipboard","writeText","renderStartButton","spectator","renderMembers","setDisableProps","SubscribedConnectedChoices","handleSelect","createButtonProps","joinButtonProps","disableRipple","disableElevation","SubscribedWaitingRoom","createMuiTheme","palette","primary","blue","secondary","green","status","danger","App","ThemeProvider","basename","exact","path","component","Games","Testing","WaitingRoom","window","location","match","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.82654963.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import React from 'react';\r\n\r\nimport './loading.scss';\r\n\r\nexport default function Loading() {\r\n  return (\r\n    <div className=\"lds-ripple\">\r\n      <div />\r\n      <div />\r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from 'react';\r\nimport Loading from 'components/Loading/loading';\r\n\r\nexport default function MainPage() {\r\n  const [count, setCount] = useState(0);\r\n  const [email, setEmail] = useState('');\r\n\r\n  const [number, setNumber] = useState(1);\r\n\r\n  const [imageName, setImageName] = useState('');\r\n\r\n  useEffect( () => {\r\n    document.title = \"MohiTheFish\"\r\n    async function fetchData() {\r\n        \r\n      const response = await fetch(\"https://cors-anywhere.herokuapp.com/https://randomfox.ca/floof/?ref=apilist.fun\", \r\n      {\r\n        method: 'GET',\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(res => res.json())\r\n      .then(res => {\r\n        setImageName(res.image);\r\n      });\r\n      return response;\r\n    }\r\n    fetchData();\r\n  }, [])\r\n\r\n  const handleChange = (e) => {\r\n    setEmail(e.target.value);\r\n  }\r\n  return (\r\n    <div>\r\n      This page is being used to test new features.\r\n      <div>\r\n        <p>You clicked {count} times</p>\r\n        <button onClick={() => setCount(count+1)}>\r\n          Click me\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <input type='text' value={email} onChange={handleChange} />\r\n      </div>\r\n      <div>\r\n        <h1>Pick a movie</h1>\r\n        <select value={number} onChange={e => setNumber(e.target.value)}>\r\n          <option value=\"1\">1</option>\r\n          <option value=\"2\">2</option>\r\n          <option value=\"3\">3</option>\r\n          <option value=\"4\">4</option>\r\n          <option value=\"5\">5</option>\r\n          <option value=\"6\">6</option>\r\n        </select>\r\n      </div>\r\n\r\n      { imageName === '' ? <Loading /> : <img src={imageName} alt=\"A fox\" />}\r\n    </div>\r\n  );\r\n}","export const SET_IS_CONNECTED = 'SET_IS_CONNECTED'; \r\nexport const SET_GAMENAME = \"SET_GAMENAME\";\r\nexport const SET_USERNAME = \"SET_USERNAME\";\r\nexport const RETURN_TO_GAME_SELECT = \"RETURN_TO_GAME_SELECT\"; \r\n\r\n\r\nexport function setIsConnected(isConnected) {\r\n  return {\r\n    type: SET_IS_CONNECTED,\r\n    isConnected,\r\n  };\r\n}\r\n\r\nexport function setGameName(game) {\r\n  return {\r\n    type: SET_GAMENAME,\r\n    game,\r\n  };\r\n}\r\nexport function setUserName(name) {\r\n  return {\r\n    type: SET_USERNAME,\r\n    name,\r\n  }\r\n}\r\n\r\nexport function returnToGameSelect() {\r\n  return {\r\n    type: RETURN_TO_GAME_SELECT\r\n  };\r\n}\r\n","import {\r\n  SET_IS_CONNECTED,\r\n  SET_GAMENAME,\r\n  SET_USERNAME,\r\n  RETURN_TO_GAME_SELECT,\r\n} from '../actions/nameActions';\r\nimport { v4 as uuid } from 'uuid';\r\n\r\nconst storageType = sessionStorage;\r\n\r\nfunction existUserId() {\r\n  let a = storageType.getItem('userId');\r\n\r\n  if(a) {return a;}\r\n\r\n  a = uuid();\r\n  storageType.setItem('userId', a);\r\n  return a;\r\n}\r\nexport const initialState = process.env.REACT_APP_DESIGN === 'true'\r\n? {\r\n  isConnected: true,\r\n  username: \"bob\",\r\n  gamename: \"mafia\",\r\n  isUpdatingName: false,\r\n  userId: 'abc123...',\r\n}\r\n: {\r\n  isConnected: false,\r\n  username: \"\",\r\n  gamename: \"\",\r\n  isUpdatingName: false,\r\n  userId: existUserId(),\r\n}\r\n\r\nexport function gameCredentials(state = initialState, action) {\r\n  switch(action.type) {\r\n    case SET_IS_CONNECTED:\r\n      return Object.assign({}, state, {\r\n        isConnected: action.isConnected\r\n      });\r\n    case SET_GAMENAME: {\r\n      return Object.assign({}, state, {\r\n        gamename: action.game,\r\n        isUpdatingName: true,\r\n      });\r\n    }\r\n    case SET_USERNAME: {\r\n      return Object.assign({}, state, {\r\n        isUpdatingName: false,\r\n        username: action.name,\r\n      });\r\n    }\r\n    case RETURN_TO_GAME_SELECT: {\r\n      return {\r\n        gamename: \"\",\r\n        username: state.username,\r\n        userId: state.userId,\r\n        isUpdatingName: state.isUpdatingName,\r\n        isConnected: state.isConnected,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}","export const SET_IS_LOADINGROOM = 'SET_IS_LOADINGROOM';\r\nexport const SET_IS_LOADING_ROOM_SELECTED_CHOICE = \"SET_IS_LOADING_ROOM_SELECTED_CHOICE\";\r\nexport const ROOM_CREATED = \"ROOM_CREATED\";\r\nexport const SET_SETTINGS_IS_UPDATING = \"SET_SETTINGS_IS_UPDATING\";\r\nexport const ROOM_SETTINGS_UPDATED = \"ROOM_SETTINGS_UPDATED\";\r\nexport const VISIBLE_ROOMS = \"VISIBLE_ROOMS\";\r\nexport const ROOM_JOINED = \"ROOM_JOINED\";\r\nexport const ROOM_SPECTATED = \"ROOM_SPECTATED\";\r\nexport const SET_MY_INDEX = \"SET_MY_INDEX\";\r\nexport const PLAYER_ADDED = \"PLAYER_ADDED\";\r\nexport const PLAYER_LEFT = \"PLAYER_LEFT\";\r\nexport const SET_IS_PRIVATE = \"SET_IS_PRIVATE\";\r\nexport const GO_BACK_TO_LOBBY = \"GO_BACK_TO_LOBBY\";\r\nexport const CLEAR_ROOM_INFO = \"CLEAR_ROOM_INFO\";\r\n\r\nexport const lobbyStates = {\r\n  CREATE: \"create\",\r\n  JOIN: \"join\",\r\n  CREATED: \"created\",\r\n  JOINED: \"joined\",\r\n};\r\n\r\nexport function setSelectedChoiceAndLoadingRoom(selectedChoice) {\r\n  return {\r\n    type: SET_IS_LOADING_ROOM_SELECTED_CHOICE,\r\n    selectedChoice,\r\n  }\r\n}\r\n\r\nexport function setIsLoadingRoom(isLoadingRoom) {\r\n  return {\r\n    type: SET_IS_LOADINGROOM,\r\n    isLoadingRoom,\r\n  };\r\n}\r\n\r\nexport function roomCreated(data) {\r\n  return {\r\n    type: ROOM_CREATED,\r\n    data,\r\n  };\r\n}\r\n\r\nexport function setSettingsIsUpdating() {\r\n  return {\r\n    type: SET_SETTINGS_IS_UPDATING,\r\n  };\r\n}\r\n\r\nexport function roomSettingsUpdated(settings) {\r\n  return {\r\n    type: ROOM_SETTINGS_UPDATED,\r\n    settings,\r\n  };\r\n}\r\n\r\nexport function visibleRooms(data) {\r\n  return {\r\n    type: VISIBLE_ROOMS,\r\n    data,\r\n  }\r\n}\r\n\r\nexport function roomJoined(data) {\r\n  return {\r\n    type: ROOM_JOINED,\r\n    data,\r\n  }\r\n}\r\n\r\nexport function roomSpectated(data) {\r\n  return {\r\n    type: ROOM_SPECTATED,\r\n    data,\r\n  };\r\n}\r\n\r\nexport function setMyIndex(data) {\r\n  return {\r\n    type: SET_MY_INDEX,\r\n    data,\r\n  }\r\n}\r\n\r\nexport function playerAdded(data) {\r\n  return {\r\n    type: PLAYER_ADDED,\r\n    data,\r\n  };\r\n}\r\n\r\nexport function playerLeft(index) {\r\n  return {\r\n    type: PLAYER_LEFT,\r\n    index,\r\n  };\r\n}\r\n\r\nexport function roomPrivacyToggled() {\r\n  return {\r\n    type: SET_IS_PRIVATE,\r\n  };\r\n}\r\n\r\nexport function goBackToLobby() {\r\n  return {\r\n    type: GO_BACK_TO_LOBBY,\r\n  };\r\n}\r\n\r\nexport function clearRoomInfo() {\r\n  return {\r\n    type: CLEAR_ROOM_INFO,\r\n  };\r\n}","export const START_GAME_SPYFALL = \"START_GAME_SPYFALL\";\r\nexport const UPDATE_MAIN_TIME = \"UPDATE_MAIN_TIME\";\r\nexport const HANDLE_LOCATION_SPYFALL = \"HANDLE_LOCATION_SPYFALL\";\r\nexport const ADD_NAME_SPYFALL = \"ADD_NAME_SPYFALL\";\r\nexport const REMOVE_NAME_SPYFALL = \"REMOVE_NAME_SPYFALL\";\r\nexport const CLEAR_SPYFALL_BOARD = \"CLEAR_SPYFALL_BOARD\";\r\n\r\nexport function startSpyfall(gameState) {\r\n  return {\r\n    game: 'spyfall',\r\n    type: START_GAME_SPYFALL,\r\n    gameState, \r\n  };\r\n}\r\n\r\nexport function updateSpyfallTime(time) {\r\n  return {\r\n    game: 'spyfall',\r\n    type: UPDATE_MAIN_TIME,\r\n    time,\r\n  };\r\n}\r\n\r\nexport function handleLocationSpyfall(e) {\r\n  return {\r\n    game: 'spyfall',\r\n    type: HANDLE_LOCATION_SPYFALL,\r\n    data: e.target.textContent,\r\n  };\r\n}\r\n\r\nexport function addNameSpyfall(index) {\r\n  return {\r\n    game: 'spyfall',\r\n    type: ADD_NAME_SPYFALL,\r\n    data: index,\r\n  };\r\n}\r\n\r\nexport function removeNameSpyfall(index) {\r\n  return {\r\n    game: 'spyfall',\r\n    type: REMOVE_NAME_SPYFALL,\r\n    data: index,\r\n  };\r\n}\r\n\r\nexport function clearSpyfallBoard() {\r\n  return {\r\n    game: 'spyfall',\r\n    type: CLEAR_SPYFALL_BOARD,\r\n  }\r\n}","import {\r\n  SET_IS_LOADINGROOM,\r\n  ROOM_CREATED,\r\n  VISIBLE_ROOMS,\r\n  ROOM_JOINED,\r\n  ROOM_SPECTATED,\r\n  SET_MY_INDEX,\r\n  PLAYER_ADDED,\r\n  PLAYER_LEFT,\r\n  SET_IS_PRIVATE,\r\n  SET_IS_LOADING_ROOM_SELECTED_CHOICE,\r\n  lobbyStates,\r\n  ROOM_SETTINGS_UPDATED,\r\n  SET_SETTINGS_IS_UPDATING,\r\n  CLEAR_ROOM_INFO,\r\n} from '../actions/gameSetupActions';\r\n\r\nimport {\r\n  START_GAME_SPYFALL,\r\n  CLEAR_SPYFALL_BOARD, \r\n} from 'redux-store/actions/spyfallActions';\r\n\r\nimport {\r\n  START_GAME_MAFIA,\r\n  CLEAR_MAFIA_BOARD,\r\n} from 'redux-store/actions/mafiaActions';\r\n\r\n\r\nconst defaultSpyfallSettings = {\r\n  time: \"8\", // minutes\r\n  gameType: \"Locations\",\r\n};\r\n\r\nconst defaultMafiaSettings =  {\r\n  dayTimeLimit: 300, //seconds\r\n  // nightTimeLimit: 60, //seconds\r\n  nightTimeLimit: 2, //seconds\r\n  // defenseTimeLimit: 25, //seconds\r\n  defenseTimeLimit: 2, \r\n  numMafia: -1,\r\n  allowSK: false,\r\n  allowJoker: false,\r\n}\r\n\r\nexport const initialState = process.env.REACT_APP_DESIGN === 'true' \r\n? {\r\n  selectedChoice: lobbyStates.CREATED,\r\n  myIndex: 0,\r\n  isLoadingRoom: false,\r\n  numPlayers: 4,\r\n  members: [\"Mohitheifhs\", \"other guy\", \"nobody\", 'zendaya', 'is', 'my', 'queen', 'zendaya', 'is', 'my', 'queen'],\r\n  spectators: [],\r\n  isSpectator: false,\r\n  roomId: \"fwef98c09we-89w-efcab-aew-9gfw\",\r\n  rooms: [],\r\n  isPlaying: false,\r\n  isUpdating: false,\r\n  settings: {\r\n    isPrivate: true,\r\n    spyfall: defaultSpyfallSettings,\r\n    mafia: defaultMafiaSettings\r\n  }\r\n}\r\n: {\r\n  selectedChoice: \"\",\r\n  myIndex: 0,\r\n  isLoadingRoom: false,\r\n  numPlayers: 1,\r\n  members: [],\r\n  spectators: [],\r\n  isSpectator: false,\r\n  roomId: \"\",\r\n  rooms: [],\r\n  isPlaying: false,\r\n  isUpdating: false,\r\n  settings: {\r\n    isPrivate: true,\r\n    spyfall: defaultSpyfallSettings,\r\n    mafia: defaultMafiaSettings\r\n  }\r\n}\r\n\r\nexport function gameData(state = initialState, action) {\r\n  switch(action.type) {\r\n    case SET_IS_LOADING_ROOM_SELECTED_CHOICE: {\r\n      return Object.assign({}, state, {\r\n        selectedChoice: action.selectedChoice,\r\n      });\r\n    }\r\n    case SET_IS_LOADINGROOM:\r\n      return Object.assign({}, state, {\r\n        isLoadingRoom: action.isLoadingRoom\r\n      });\r\n    case ROOM_CREATED: {\r\n      const { members, roomId } = action.data;\r\n      return Object.assign({}, state, {\r\n        members: members,\r\n        roomId: roomId,\r\n        myIndex: members.length-1,\r\n        selectedChoice: lobbyStates.CREATED,\r\n      });\r\n    }\r\n    case ROOM_SETTINGS_UPDATED: {\r\n      const newSettings = action.settings;\r\n      return Object.assign({}, state, {\r\n        settings: newSettings,\r\n        isUpdating: false,\r\n      });\r\n    }\r\n    case SET_SETTINGS_IS_UPDATING: {\r\n      return Object.assign({}, state, {\r\n        isUpdating: true,\r\n      });\r\n    }\r\n    case VISIBLE_ROOMS: {\r\n      return Object.assign({}, state, {\r\n        rooms: action.data,\r\n        isLoadingRoom: false, \r\n      });\r\n    }\r\n    case ROOM_JOINED: {\r\n      const { members, roomId, settings: newSettings } = action.data;\r\n      return Object.assign({}, state, {\r\n        members,\r\n        roomId,\r\n        myIndex: members.length-1,\r\n        selectedChoice: lobbyStates.JOINED,\r\n        settings: newSettings,\r\n      });\r\n    }\r\n    case ROOM_SPECTATED: {\r\n      const { members, roomId, settings: newSettings, spectators } = action.data;\r\n      return Object.assign({}, state, {\r\n        members,\r\n        roomId,\r\n        myIndex: spectators.length-1,\r\n        selectedChoice: lobbyStates.JOINED,\r\n        settings: newSettings,\r\n        spectators,\r\n      })\r\n    }\r\n    case SET_MY_INDEX: {\r\n      const { members, myIndex } = action.data;\r\n      return {\r\n        ...state,\r\n        members,\r\n        myIndex,\r\n        isSpectator: false, \r\n        spectators: [],\r\n      }\r\n    }\r\n    case PLAYER_ADDED: {\r\n      const { members, roomId } = action.data;\r\n      return Object.assign({}, state, {\r\n        members: members,\r\n        roomId: roomId,\r\n      });\r\n    }\r\n    case PLAYER_LEFT: {\r\n      const { members, myIndex } = state;\r\n      const { index: deletedIndex } = action;\r\n      const newState = {\r\n        myIndex,\r\n        members: [],\r\n      };\r\n\r\n      if (deletedIndex < myIndex ) {\r\n        newState.myIndex -= 1;\r\n        if (newState.myIndex === 0) {\r\n          newState.selectedChoice = lobbyStates.CREATED;\r\n        }\r\n      }\r\n      newState.members =  members.filter((m, index) => (index !== deletedIndex) );\r\n      return Object.assign({}, state, newState);\r\n    }\r\n    case START_GAME_SPYFALL: \r\n    case START_GAME_MAFIA : {\r\n      return Object.assign({}, state, {\r\n        isPlaying: true,\r\n      });\r\n    }\r\n    case CLEAR_MAFIA_BOARD:\r\n    case CLEAR_SPYFALL_BOARD: {\r\n      return Object.assign({}, state, {\r\n        isPlaying: false,\r\n        isLoadingRoom: true,\r\n      });\r\n    }\r\n    case SET_IS_PRIVATE: {\r\n      return Object.assign({}, state, {\r\n        settings: {\r\n          ...state.settings,\r\n          isPrivate: !state.settings.isPrivate\r\n        }\r\n      });\r\n    }\r\n    case CLEAR_ROOM_INFO: {\r\n      return Object.assign({}, state, {\r\n        isConnected: state.isConnected,\r\n        selectedChoice: \"\",\r\n        isLoadingRoom: false,\r\n        numPlayers: 1,\r\n        members: [],\r\n        spectators: [],\r\n        isSpectator: false,\r\n        roomId: \"\",\r\n        myIndex: -1,\r\n        rooms: [],\r\n        isPlaying: false,\r\n        isUpdating: false,\r\n        settings: {\r\n          isPrivate: true,\r\n          spyfall: defaultSpyfallSettings,\r\n          mafia: defaultMafiaSettings\r\n        }\r\n      }\r\n      )\r\n    }\r\n    default:\r\n      return state;\r\n  } \r\n}","import {UPDATE_MAIN_TIME} from './spyfallActions';\r\n\r\nexport const START_GAME_MAFIA = 'START_GAME_MAFIA';\r\nexport const SECONDARY_TIME_UPDATE = \"SECONDARY_TIME_UPDATE\";\r\nexport const BEGIN_TRIAL = \"BEGIN_TRIAL\";\r\nexport const CLEAR_MAFIA_BOARD = 'CLEAR_MAFIA_BOARD';\r\nexport const CHAT_UPDATED = \"CHAT_UPDATED\";\r\nexport const OTHER_PLAYER_VOTED = 'OTHER_PLAYER_VOTED';\r\nexport const I_VOTED = 'I_VOTED';\r\nexport const OTHER_PLAYER_GUILTY_VOTED = 'OTHER_PLAYER_GUILTY_VOTED';\r\nexport const I_GUILTY_VOTED = 'I_GUILTY_VOTED';\r\nexport const COURT_RESULT = 'COURT_RESULT';\r\nexport const USED_POWER = 'USED_POWER';\r\nexport const PRIVATE_NIGHT_RESULT = 'PRIVATE_NIGHT_RESULT';\r\nexport const PUBLIC_NIGHT_RESULT = 'PUBLIC_NIGHT_RESULT';\r\n\r\nexport function startMafia(gameState) {\r\n  return {\r\n    game: 'mafia',\r\n    type: START_GAME_MAFIA,\r\n    gameState,\r\n  };\r\n}\r\n\r\nexport function updateMainMafiaTime(time) {\r\n  return {\r\n    game: 'mafia',\r\n    type: UPDATE_MAIN_TIME,\r\n    data: time,\r\n  };\r\n}\r\n\r\nexport function beginTrial(nameIndex) {\r\n  return {\r\n    game: 'mafia',\r\n    type: BEGIN_TRIAL,\r\n    data: nameIndex,\r\n  };\r\n}\r\n\r\nexport function secondaryTimeUpdate(time) {\r\n  return {\r\n    game: 'mafia',\r\n    type: SECONDARY_TIME_UPDATE,\r\n    data: time,\r\n  }\r\n}\r\n\r\nexport function clearMafiaBoard() {\r\n  return {\r\n    game: 'mafia',\r\n    type: CLEAR_MAFIA_BOARD,\r\n  };\r\n}\r\n\r\nexport function chatUpdated(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: CHAT_UPDATED,\r\n    ...data,\r\n  }\r\n}\r\n\r\nexport function otherPlayerVotedMafia(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: OTHER_PLAYER_VOTED,\r\n    ...data,\r\n  }\r\n}\r\n\r\nexport function iVotedMafia(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: I_VOTED,\r\n    ...data,\r\n  };\r\n}\r\n\r\nexport function otherPlayerGuiltyVotedMafia(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: OTHER_PLAYER_GUILTY_VOTED,\r\n    ...data,\r\n  }\r\n}\r\n\r\nexport function iGuiltyVotedMafia(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: I_GUILTY_VOTED,\r\n    ...data,\r\n  }\r\n}\r\n\r\nexport function courtResult(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: COURT_RESULT,\r\n    data,\r\n  };\r\n}\r\n\r\nexport function usedPower(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: USED_POWER,\r\n    data,\r\n  };\r\n}\r\n\r\nexport function privateNightResult(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: PRIVATE_NIGHT_RESULT,\r\n    data,\r\n  };\r\n}\r\n\r\nexport function publicNightResult(data) {\r\n  return {\r\n    game: 'mafia',\r\n    type: PUBLIC_NIGHT_RESULT,\r\n    data,\r\n  };\r\n}","import store from 'redux-store';\r\nimport {\r\n  HANDLE_LOCATION_SPYFALL,\r\n  ADD_NAME_SPYFALL,\r\n  REMOVE_NAME_SPYFALL,\r\n  START_GAME_SPYFALL,\r\n  UPDATE_MAIN_TIME,\r\n  CLEAR_SPYFALL_BOARD\r\n} from 'redux-store/actions/spyfallActions';\r\n\r\nimport {\r\n  START_GAME_MAFIA,\r\n  CHAT_UPDATED,\r\n  OTHER_PLAYER_VOTED,\r\n  BEGIN_TRIAL,\r\n  SECONDARY_TIME_UPDATE,\r\n  I_VOTED,\r\n  CLEAR_MAFIA_BOARD,\r\n  OTHER_PLAYER_GUILTY_VOTED,\r\n  I_GUILTY_VOTED,\r\n  COURT_RESULT,\r\n  USED_POWER,\r\n  PRIVATE_NIGHT_RESULT,\r\n  PUBLIC_NIGHT_RESULT,\r\n} from 'redux-store/actions/mafiaActions';\r\n\r\nconst defaultMafiaState = process.env.REACT_APP_DESIGN === 'true' ? {\r\n  phase: 2,\r\n  isRecapPeriod: false,\r\n  secondaryTime: 0,\r\n  role: -1,\r\n  roleCount: {},\r\n  chatHistory: [\r\n    [{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},{audience: 0, message: 'hi'},],\r\n    [{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},{audience: 0, message: 'bye'},],\r\n    [{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},{audience: 0, message: 'cya'},],\r\n    [{audience: 0, message: 'my name is alexander hamilton'},{audience: 0, message: 'my name is alexander hamilton'},{audience: 0, message: 'my name is alexander hamilton'},{audience: 0, message: 'my name is alexander hamilton'},{audience: 0, message: 'my name is alexander hamilton'},],\r\n    [{audience: 0, message: 'lafayette'}]\r\n  ],\r\n  playerProfiles: [\r\n    {numVotes: 0, isAlive: true},\r\n    {numVotes: 0, isAlive: true},\r\n    {numVotes: 0, isAlive: true}, \r\n    {numVotes: 0, isAlive: true},\r\n    {numVotes: 0, isAlive: true},\r\n    {numVotes: 0, isAlive: true}, \r\n    {numVotes: 0, isAlive: true},\r\n    {numVotes: 0, isAlive: true},\r\n    {numVotes: 0, isAlive: true},\r\n    {numVotes: 0, isAlive: true},\r\n    {numVotes: 0, isAlive: true}\r\n  ],\r\n  numAbstain: 0,\r\n  myTarget: -1,\r\n  onTrial: -1,\r\n  isDefending: true,\r\n  myGuiltyDecision: '',\r\n  numGuilty: 0,\r\n  numNotGuilty: 0,\r\n\r\n  iAmDead: false,\r\n} : {\r\n  phase: 0,\r\n  isRecapPeriod: true,\r\n  secondaryTime: 0,\r\n  role: -1,\r\n  roleCount: {},\r\n  chatHistory: [[]],\r\n  playerProfiles: [],\r\n  numAbstain: 0,\r\n  myTarget: -1,\r\n  onTrial: -1,\r\n  isDefending: true,\r\n  myGuiltyDecision: '',\r\n  numGuilty: 0,\r\n  numNotGuilty: 0,\r\n  wasSaved: false,\r\n  wasAttacked: false,\r\n  iAmDead: false,\r\n\r\n};\r\nconst defaultSpyfallState = {\r\n  selectedLocations: new Map(),\r\n  selectedNamesByIndex: new Set(),\r\n  spyIndex: 0,\r\n  locations: [],\r\n  secretLocation: \"\",\r\n};\r\n\r\nexport const initialState = {\r\n  time: 0,\r\n  spyfall: defaultSpyfallState,\r\n  mafia: defaultMafiaState\r\n};\r\n\r\nconst NUM_STATES_LOCATIONS = 3;\r\n\r\nfunction mafiaReducers(state, action) {\r\n  switch(action.type) {\r\n    case START_GAME_MAFIA: {\r\n      const {\r\n        role, \r\n        roleCount,\r\n        numPlayers,\r\n      } = action.gameState;\r\n      const playerProfiles = [];\r\n      for(var i=0; i<numPlayers; i++) {\r\n        playerProfiles.push({\r\n          numVotes: 0,\r\n          isAlive: true,\r\n        });\r\n      }\r\n      return {\r\n        ...state,\r\n        time: 0,\r\n        mafia: {\r\n          ...state.mafia,\r\n          role,\r\n          roleCount,\r\n          phase: 0,\r\n          playerProfiles,\r\n        }\r\n      }\r\n    }\r\n    case I_VOTED: //These two cases will be identical, apart from setting the myTarget field\r\n    case OTHER_PLAYER_VOTED: {\r\n      const {\r\n        audience,\r\n        phase,\r\n        message,\r\n        newTarget,\r\n        oldTarget,\r\n      } = action;\r\n\r\n      const oldChatHistory =  state.mafia.chatHistory;\r\n      const newChatHistory = oldChatHistory.filter(item => item);\r\n      let numAbstain = state.mafia.numAbstain;\r\n      newChatHistory[phase].push({audience, message});\r\n\r\n      const newProfiles = state.mafia.playerProfiles.filter(item => item);\r\n      if(oldTarget >= 0) {\r\n        newProfiles[oldTarget].numVotes--;\r\n      } \r\n      else if(oldTarget === -2) {\r\n        numAbstain--;\r\n      }\r\n\r\n      if(newTarget >= 0) {\r\n        newProfiles[newTarget].numVotes++;\r\n      }\r\n      else if(newTarget === -2) {\r\n        numAbstain++;\r\n      }\r\n\r\n      const newMafiaState = {\r\n        ...state.mafia,\r\n        chatHistory: newChatHistory,\r\n        playerProfiles: newProfiles,\r\n        numAbstain,\r\n      };\r\n\r\n      if (action.type === I_VOTED) {\r\n        newMafiaState.myTarget = newTarget;\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        mafia: newMafiaState,\r\n      }\r\n    }\r\n    \r\n    case I_GUILTY_VOTED: //These two cases will be identical, apart from setting the myGuiltyDecision field\r\n    case OTHER_PLAYER_GUILTY_VOTED: {\r\n      const {\r\n        audience,\r\n        phase,\r\n        message,\r\n        newDecision,\r\n        oldDecision,\r\n      } = action;\r\n\r\n      const oldChatHistory =  state.mafia.chatHistory;\r\n      const newChatHistory = oldChatHistory.filter(item => item);\r\n      newChatHistory[phase].push({audience, message});\r\n\r\n      let numGuilty = state.mafia.numGuilty;\r\n      let numNotGuilty = state.mafia.numNotGuilty;\r\n      if (oldDecision === '') {\r\n        if (newDecision[0] === 'g') {\r\n          numGuilty++;\r\n        }\r\n        else if (newDecision[0] === 'n') {\r\n          numNotGuilty++;\r\n        }\r\n      }\r\n      else if (oldDecision[0] === 'g') {\r\n        numGuilty--;\r\n        if (newDecision[0] === 'n') {\r\n          numNotGuilty++;\r\n        }\r\n      }\r\n      else if (oldDecision[0] === 'n') {\r\n        numNotGuilty--;\r\n        if (newDecision[0] === 'g') {\r\n          numGuilty++;\r\n        }\r\n\r\n      }\r\n\r\n      const newMafiaState = {\r\n        ...state.mafia,\r\n        chatHistory: newChatHistory,\r\n        numGuilty,\r\n        numNotGuilty,\r\n      };\r\n\r\n      if (action.type === I_GUILTY_VOTED) {\r\n        newMafiaState.myGuiltyDecision = newDecision;\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        mafia: newMafiaState,\r\n      }\r\n    }\r\n\r\n    case CHAT_UPDATED: {\r\n      const {audience, phase, message} = action;\r\n      const oldChatHistory =  state.mafia.chatHistory;\r\n      const newChatHistory = oldChatHistory.filter(item => item);\r\n      //Make sure that phase is valid index withing newChatHistory\r\n      //This will *hopefully* be handled by updating time\r\n      while(newChatHistory.length <= phase) {\r\n        newChatHistory.push([]);\r\n      }\r\n      newChatHistory[phase].push({audience, message});\r\n      return {\r\n        ...state,\r\n        mafia: {\r\n          ...state.mafia, \r\n          chatHistory: newChatHistory,\r\n        }\r\n      }\r\n    }\r\n    case UPDATE_MAIN_TIME: {\r\n      const [phase, time, isRecapPeriod] = action.data;\r\n      const oldChatHistory =  state.mafia.chatHistory;\r\n      let newChatHistory = oldChatHistory;\r\n      let newProfiles = state.mafia.playerProfiles;\r\n      let numAbstain = state.mafia.numAbstain;\r\n      let myTarget = state.mafia.myTarget;\r\n      let wasAttacked = state.mafia.wasAttacked;\r\n      let wasSaved = state.mafia.wasSaved;\r\n      if (phase !== state.mafia.phase) {\r\n        if (phase % 2 === 0) {\r\n          newProfiles = state.mafia.playerProfiles.map((val) => {\r\n            return {\r\n              numVotes: 0,\r\n              isAlive: val.isAlive,\r\n            };\r\n          });\r\n          numAbstain = 0;\r\n        }\r\n        myTarget = -1;\r\n        newChatHistory = oldChatHistory.filter(item => item);\r\n        newChatHistory.push([]);\r\n        wasAttacked = false;\r\n        wasSaved = false;\r\n\r\n      }\r\n      return {\r\n        ...state,\r\n        time,\r\n        mafia: {\r\n          ...state.mafia,\r\n          chatHistory: newChatHistory,\r\n          phase,\r\n          myTarget,\r\n          isRecapPeriod,\r\n          playerProfiles: newProfiles,\r\n          numAbstain,\r\n          wasAttacked, \r\n          wasSaved,\r\n        }\r\n      };\r\n    }\r\n    case BEGIN_TRIAL: {\r\n      const {audience, phase, name, onTrial} = action.data;\r\n      const oldChatHistory =  state.mafia.chatHistory;\r\n      const newChatHistory = oldChatHistory.filter(item => item);\r\n      newChatHistory[phase].push({audience, message: `${name} is on trial!`})\r\n      \r\n      return {\r\n        ...state,\r\n        mafia: {\r\n          ...state.mafia,\r\n          chatHistory: newChatHistory,\r\n          onTrial,\r\n        }\r\n      }\r\n    }\r\n    case SECONDARY_TIME_UPDATE: {\r\n      const [phase, secondaryTime, isDefending] = action.data;\r\n      return {\r\n        ...state,\r\n        mafia: {\r\n          ...state.mafia,\r\n          phase,\r\n          secondaryTime,\r\n          isDefending,\r\n        }\r\n      };\r\n    }\r\n    case COURT_RESULT: {\r\n      const {\r\n        message,\r\n        audience,\r\n        phase,\r\n        isAlive,\r\n        killedIndex,\r\n      } = action.data;\r\n      const oldChatHistory =  state.mafia.chatHistory;\r\n      const newChatHistory = oldChatHistory.filter(item => item);\r\n      newChatHistory[phase].push({audience, message});\r\n      let myNewTarget = state.mafia.myTarget;\r\n      // If targeting player on trial, our new target will be nobody.\r\n      if (killedIndex === state.mafia.myTarget) {\r\n        myNewTarget = -1;\r\n      }\r\n      const newProfiles = state.mafia.playerProfiles.filter(item => item);\r\n      const profile = newProfiles[killedIndex];\r\n      profile.numVotes = 0;\r\n      profile.isAlive = isAlive;\r\n      let iAmDead = state.mafia.iAmDead;\r\n      if(!isAlive && state.myIndex  === killedIndex) {\r\n        iAmDead = true;\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        mafia: {\r\n          ...state.mafia,\r\n          chatHistory: newChatHistory,\r\n          myTarget: myNewTarget,\r\n          playerProfiles: newProfiles,\r\n          myGuiltyDecision: '',\r\n          numGuilty: 0,\r\n          numNotGuilty: 0,\r\n          onTrial: -1,\r\n          isDefending: true,\r\n          iAmDead,\r\n        }\r\n      };\r\n    }\r\n    case USED_POWER: {\r\n      const { message, audience, phase, myIndex, targetIndex } = action.data;\r\n      const oldChatHistory =  state.mafia.chatHistory;\r\n      const newChatHistory = oldChatHistory.filter(item => item);\r\n      newChatHistory[phase].push({audience, message});\r\n\r\n      const isMe = myIndex === state.myIndex;\r\n      return {\r\n        ...state,\r\n        mafia: {\r\n          ...state.mafia,\r\n          myTarget: isMe ? targetIndex : state.mafia.myTarget,\r\n          chatHistory: newChatHistory,\r\n        }\r\n      };\r\n    }\r\n    case PRIVATE_NIGHT_RESULT: {\r\n      const { audience, phase, message, wasSaved, wasAttacked } = action.data;\r\n      const oldChatHistory =  state.mafia.chatHistory;\r\n      const newChatHistory = oldChatHistory.filter(item => item);\r\n      newChatHistory[phase].push({audience, message});\r\n      return {\r\n        ...state,\r\n        mafia: {\r\n          ...state.mafia,\r\n          wasSaved,\r\n          wasAttacked,\r\n          chatHistory: newChatHistory,\r\n        }\r\n      }\r\n\r\n    }\r\n    case PUBLIC_NIGHT_RESULT: {\r\n      const { phase, events } = action.data;\r\n      \r\n      let newChatHistory =  state.mafia.chatHistory;\r\n      let newPlayerProfiles = state.mafia.playerProfiles;\r\n      let iAmDead = state.mafia.iAmDead;\r\n      if(events.length > 0) {\r\n        newChatHistory = state.mafia.chatHistory.filter(item => item);\r\n        while(newChatHistory.length <= phase) {\r\n          newChatHistory.push([]);\r\n        }\r\n        events.forEach(event => {\r\n          const { index, audience, message, wasKilled} = event;\r\n          newChatHistory[phase].push({audience, message});\r\n          if(wasKilled) {\r\n            newPlayerProfiles = state.mafia.playerProfiles.filter(item => item);\r\n            newPlayerProfiles[index].isAlive = false;\r\n            if (index === state.myIndex) {\r\n              iAmDead = true;\r\n            }\r\n          }\r\n          \r\n        });\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        mafia: {\r\n          ...state.mafia,\r\n          playerProfiles: newPlayerProfiles,\r\n          chatHistory: newChatHistory,\r\n          iAmDead,\r\n        }\r\n      }\r\n    }\r\n    case CLEAR_MAFIA_BOARD: {\r\n      return {\r\n        ...state,\r\n        mafia: defaultMafiaState\r\n      };\r\n    }\r\n    default: return state;\r\n  }\r\n}\r\n\r\nfunction spyfallReducers(state, action) {\r\n  switch(action.type) {\r\n    case START_GAME_SPYFALL: {\r\n      return {\r\n        ...state,\r\n        time: action.gameState.time,\r\n        spyfall: {\r\n          spyIndex: action.gameState.spyIndex,\r\n          selectedLocations: state.spyfall.selectedLocations,\r\n          selectedNamesByIndex: state.spyfall.selectedNamesByIndex,\r\n          locations: action.gameState.locations,\r\n          secretLocation: action.gameState.secretLocation,\r\n        },\r\n      };\r\n    }\r\n    case UPDATE_MAIN_TIME: {\r\n      return {\r\n        ...state,\r\n        time: action.time,\r\n      };\r\n    }\r\n    case ADD_NAME_SPYFALL: {\r\n      const {selectedNamesByIndex} = state.spyfall;\r\n      const clonedNames = new Set(selectedNamesByIndex);\r\n      clonedNames.add(action.data);\r\n      return Object.assign({}, state, {\r\n        spyfall: {\r\n          ...state.spyfall,\r\n          selectedNamesByIndex: clonedNames,\r\n        }\r\n      });\r\n    }\r\n    case REMOVE_NAME_SPYFALL: {\r\n      const {selectedNamesByIndex} = state.spyfall;\r\n      const clonedNames = new Set(selectedNamesByIndex);\r\n      clonedNames.delete(action.data);\r\n      return Object.assign({}, state, {\r\n        spyfall: {\r\n          ...state.spyfall,\r\n          selectedNamesByIndex: clonedNames,\r\n        }\r\n      });\r\n    }\r\n    case HANDLE_LOCATION_SPYFALL: {\r\n      const clonedLocations = new Map(state.spyfall.selectedLocations);\r\n      const oldVal = clonedLocations.get(action.data);\r\n      if(oldVal) {\r\n        clonedLocations.set(action.data, (oldVal+1) % NUM_STATES_LOCATIONS);\r\n      }\r\n      else {\r\n        clonedLocations.set(action.data, 1);\r\n      }\r\n      return Object.assign({}, state, {\r\n        spyfall: {\r\n          ...state.spyfall,\r\n          selectedLocations: clonedLocations,\r\n        }\r\n      })\r\n    }\r\n    case CLEAR_SPYFALL_BOARD: {\r\n      return Object.assign({}, state, {\r\n        spyfall: defaultSpyfallState,\r\n      });\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function playState(state = initialState, action) {\r\n  switch(action.game) {\r\n    case 'mafia': {\r\n      return mafiaReducers(state, action);\r\n    }\r\n    default: { // spyfall\r\n      return spyfallReducers(state, action);\r\n    }\r\n  }\r\n}","import { gameCredentials, initialState as initialGameCredentialState } from './nameReducers';\r\nimport { gameData, initialState as initialGameData } from './gameReducers';\r\nimport { playState, initialState as initialPlayState } from './playReducers';\r\nexport const defaultState = {\r\n  gameData: initialGameData,\r\n  gameCredentials: initialGameCredentialState,\r\n  playState: initialPlayState,\r\n};\r\nfunction customReducer(state = defaultState, action) {\r\n  const myIndex = state.gameData.myIndex;\r\n  const playStateWithIndex = state.playState;\r\n  playStateWithIndex.myIndex = myIndex;\r\n  return {\r\n    gameCredentials: gameCredentials(state.gameCredentials, action),\r\n    gameData: gameData(state.gameData, action),\r\n    playState: playState(playStateWithIndex, action),\r\n  };\r\n}\r\n\r\nexport default customReducer;","import { createStore } from 'redux';\r\nimport MohiApp, {defaultState} from './reducers';\r\n\r\n/**\r\n * REDUX WORK FLOW\r\n * 1) Create an action. Follow the schema already defined.\r\n *  (Create a constant action type. Setup the data to be passed to reducer)\r\n * 2) Add to the reducer. Follow the schema already defined. \r\n *  (Make sure to return an object that has all keys as before.)\r\n * 3) You may now *dispatch* an action from anywhere.\r\n *  (Note: component must *subscribe* via the connect method in order to be refreshed)\r\n * Maybe 4) Sometimes you may want to create a whole separate data flow. Simply create the relevant files\r\n *  and then make sure to update this default state to include those changes. \r\n */\r\nexport const storageType = sessionStorage;\r\n\r\nfunction loadState() {\r\n  const gameData = JSON.parse(storageType.getItem('gameData'));\r\n  const username = storageType.getItem('username');\r\n  const gamename = storageType.getItem('gamename');\r\n  const userId = storageType.getItem('userId');\r\n\r\n  if (!username || !gamename || !userId) {\r\n    return defaultState;\r\n  }\r\n  const myState = {};\r\n  myState.gameCredentials = {\r\n    username,\r\n    gamename,\r\n    userId,\r\n    isConnected: false,\r\n    isUpdatingName: false,\r\n  }\r\n\r\n  if (gameData && gameData.isPlaying) {\r\n    myState.gameData = gameData;\r\n  }\r\n  else {\r\n    myState.gameData = defaultState.gameData;\r\n  }\r\n\r\n  myState.playState = defaultState.playState;\r\n\r\n  return myState;\r\n}\r\n\r\nconst store = createStore(MohiApp, loadState());\r\n\r\n/**\r\n * Saves a piece of the state that will be useful in cases of refresh or disconnects.\r\n * @param {any} state The total state object kept track of by redux\r\n */\r\nexport function saveState(state) {\r\n  const { username, gamename, userId } = state.gameCredentials;\r\n  storageType.setItem('username', username);\r\n  storageType.setItem('gamename', gamename);\r\n  storageType.setItem('userId', userId);\r\n}\r\n\r\nexport function saveCurrentState() {\r\n  saveState(store.getState());\r\n}\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  store.subscribe(() => {\r\n    console.log(store.getState());\r\n  })\r\n}\r\nexport default store;","import io from 'socket.io-client';\r\nimport store from 'redux-store';\r\n\r\nimport {\r\n  setIsConnected,\r\n  setUserName,\r\n} from 'redux-store/actions/nameActions';\r\n\r\nimport {\r\n  setIsLoadingRoom,\r\n  roomCreated,\r\n  visibleRooms,\r\n  roomJoined,\r\n  roomSpectated,\r\n  setMyIndex,\r\n  playerAdded,\r\n  playerLeft,\r\n  roomPrivacyToggled,\r\n  roomSettingsUpdated,\r\n} from 'redux-store/actions/gameSetupActions';\r\n\r\nimport {\r\n  startSpyfall,\r\n  updateSpyfallTime,\r\n  clearSpyfallBoard,\r\n} from 'redux-store/actions/spyfallActions';\r\n\r\nimport {\r\n  startMafia,\r\n  clearMafiaBoard,\r\n  beginTrial,\r\n  updateMainMafiaTime,\r\n  secondaryTimeUpdate,\r\n  chatUpdated,\r\n  otherPlayerVotedMafia,\r\n  iVotedMafia,\r\n  otherPlayerGuiltyVotedMafia,\r\n  iGuiltyVotedMafia,\r\n  courtResult,\r\n  usedPower,\r\n  publicNightResult,\r\n  privateNightResult,\r\n} from 'redux-store/actions/mafiaActions';\r\n\r\nvar socket = null;\r\nlet userId = null;\r\nlet prevGame = \"\";\r\n\r\nconst events = {\r\n  spyfall: ['timeUpdate'],\r\n  mafia: ['mainTimeUpdate', 'mafiaChatUpdated', 'otherPlayerVotedMafia', 'iVotedMafia'],\r\n};\r\n\r\nfunction invalidSocket(socket) {\r\n  if (!socket) {throw new Error('Socket invalid!');}\r\n}\r\n\r\nfunction removePrevEventListeners(newSocket) {\r\n  if (!prevGame) return;\r\n\r\n  const eventNames = events[prevGame];\r\n  eventNames.forEach(event => {\r\n    newSocket.off(event);\r\n  });\r\n}\r\n\r\nfunction addSpyfallEventListeners(newSocket) {\r\n  if (prevGame !== 'spyfall') {\r\n    removePrevEventListeners(newSocket);\r\n    prevGame = 'spyfall';\r\n\r\n    newSocket.on('mainTimeUpdate', function(time) {\r\n      store.dispatch(updateSpyfallTime(time));\r\n    });\r\n  }\r\n}\r\n\r\nfunction addMafiaEventListeners(newSocket) {\r\n  if (prevGame !== 'mafia') {\r\n    removePrevEventListeners(newSocket);\r\n    prevGame = 'mafia';\r\n    \r\n    newSocket.on('mainTimeUpdate', function(time) {\r\n      store.dispatch(updateMainMafiaTime(time));\r\n    });\r\n\r\n\r\n    newSocket.on('beginTrial', function(name) {\r\n      store.dispatch(beginTrial(name));\r\n    })\r\n    newSocket.on('secondaryTimeUpdate', function(time) {\r\n      store.dispatch(secondaryTimeUpdate(time));\r\n    })\r\n    \r\n    newSocket.on('mafiaChatUpdated', function (data) {\r\n      store.dispatch(chatUpdated(data));\r\n    });\r\n\r\n    newSocket.on('otherPlayerVotedMafia', function(data) {\r\n      store.dispatch(otherPlayerVotedMafia(data));\r\n    });\r\n\r\n    newSocket.on('iVotedMafia', function(data){\r\n      store.dispatch(iVotedMafia(data));\r\n    });\r\n\r\n    newSocket.on('otherPlayerVotedGuiltyDecision', function(data) {\r\n      store.dispatch(otherPlayerGuiltyVotedMafia(data));\r\n    });\r\n\r\n    newSocket.on('iVotedGuiltyDecision', function(data) {\r\n      store.dispatch(iGuiltyVotedMafia(data));\r\n    });\r\n\r\n    newSocket.on('courtResult', function(data) {\r\n      store.dispatch(courtResult(data));\r\n    });\r\n    \r\n    newSocket.on('usedPower', function(data) {\r\n      store.dispatch(usedPower(data));\r\n    });\r\n\r\n    newSocket.on('nightResult', function(data) {\r\n      store.dispatch(privateNightResult(data));\r\n    })\r\n\r\n    newSocket.on('publicNightResult', function(data) {\r\n      store.dispatch(publicNightResult(data));\r\n    })\r\n  }\r\n}\r\n\r\nexport function connectToServer() {\r\n  console.log('connecting...');\r\n  const {userId: uid} = store.getState().gameCredentials;\r\n  userId = uid;\r\n  let a = `https://mohithefish.herokuapp.com`;\r\n  if (process.env.NODE_ENV === 'development') {\r\n    a = `http://localhost:5000`;\r\n  }\r\n  const newSocket = io.connect(a, {\r\n    reconnection: true,\r\n    reconnectionDelay: 1000,\r\n    reconnectionDelayMax : 5000,\r\n    reconnectionAttempts: 10,\r\n  });\r\n\r\n  newSocket.on('connect', function() {\r\n    console.log('The client connected');\r\n    socket = newSocket;\r\n\r\n    store.dispatch(setIsConnected(true));\r\n    socket.emit('initialConnection', userId);\r\n  });\r\n\r\n  newSocket.on('nameUpdated', function(name){\r\n    store.dispatch(setUserName(name));\r\n  });\r\n\r\n  newSocket.on('createdRoom', function(roomInfo){\r\n    store.dispatch(roomCreated(roomInfo));\r\n  });\r\n\r\n  newSocket.on('settingsUpdated', function(settings){\r\n    store.dispatch(roomSettingsUpdated(settings));\r\n  });\r\n  \r\n  newSocket.on('togglePrivate', function(newState){\r\n    store.dispatch(roomPrivacyToggled(newState));\r\n  })\r\n\r\n  newSocket.on('availableRooms', function(rooms) {\r\n    store.dispatch(visibleRooms(rooms));\r\n  });\r\n\r\n  newSocket.on('needId', function() {\r\n    console.log('you need an id to access this room!'); \r\n  });\r\n\r\n  newSocket.on('youJoined', function(roomInfo){\r\n    store.dispatch(roomJoined(roomInfo))\r\n  });\r\n\r\n  newSocket.on('youSpectated', function(roomInfo) {\r\n    store.dispatch(roomSpectated(roomInfo))\r\n  })\r\n\r\n  newSocket.on('othersJoined', function(roomInfo){\r\n    store.dispatch(playerAdded(roomInfo));\r\n  })\r\n\r\n  newSocket.on('gameStarted', function(gameState){\r\n    const gamename = store.getState().gameCredentials.gamename;\r\n    if (gamename === 'spyfall') {\r\n      addSpyfallEventListeners(newSocket);\r\n      store.dispatch(startSpyfall(gameState));\r\n    }\r\n    else if (gamename === 'mafia') {\r\n      addMafiaEventListeners(newSocket);\r\n      store.dispatch(startMafia(gameState));\r\n    }\r\n  });\r\n\r\n  newSocket.on('sentBackToLobby', function(){\r\n    const gamename = store.getState().gameCredentials.gamename;\r\n    if(gamename === 'spyfall') {\r\n      store.dispatch(clearSpyfallBoard());\r\n    }\r\n    else if (gamename === 'mafia') {\r\n      store.dispatch(clearMafiaBoard());\r\n    }\r\n  });\r\n\r\n  newSocket.on('myIndex', function(data){\r\n    store.dispatch(setMyIndex(data));\r\n  })\r\n\r\n  newSocket.on('roomReady', function() {\r\n    store.dispatch(setIsLoadingRoom(false));\r\n  })\r\n  newSocket.on('playerLeft', function(index) {\r\n    store.dispatch(playerLeft(index));\r\n  });\r\n\r\n  newSocket.on('disconnect', function() {\r\n    socket = null;\r\n    store.dispatch(setIsConnected(false));\r\n  });\r\n}\r\n\r\nexport function isConnected() {\r\n  return !socket;\r\n}\r\n\r\nexport function updateMyName(name) {\r\n  invalidSocket(socket);\r\n\r\n  socket.emit('updateMyName', [userId, name]);\r\n}\r\n\r\nfunction getSpecificGameSettings(settings, gamename) {\r\n  const smallSettings = {\r\n    isPrivate: settings.isPrivate,\r\n  };\r\n  smallSettings[gamename] = settings[gamename];\r\n  return smallSettings;\r\n}\r\n\r\nexport function createRoomWithSettings(settings) {\r\n  invalidSocket(socket);\r\n\r\n  const gamename = store.getState().gameCredentials.gamename;\r\n  socket.emit('createRoom', [userId, gamename, getSpecificGameSettings(settings, gamename)]);\r\n}\r\n\r\nexport function updateRoomSettings(settings) {\r\n  invalidSocket(socket);\r\n  \r\n  socket.emit('updateSettings', [userId, settings]);\r\n}\r\n\r\n// export function forceDisconnect() {\r\n//   invalidSocket(socket);\r\n\r\n//   socket.emit('forceDisconnect');\r\n// }\r\n\r\nexport function getAvailableRooms() {\r\n  invalidSocket(socket);\r\n\r\n  store.dispatch(setIsLoadingRoom(true));\r\n  socket.emit('getAvailableRooms', store.getState().gameCredentials.gamename);\r\n}\r\n\r\nexport function ejectFromRoom() {\r\n  invalidSocket(socket);\r\n  \r\n  socket.emit('ejectPlayerFromRoom', userId);\r\n}\r\n\r\nexport function joinRoom(targetRoom) {\r\n  invalidSocket(socket);\r\n  const data = {\r\n    targetRoom: targetRoom.trim(),\r\n    userId,\r\n  };\r\n  socket.emit('joinRoom', data);\r\n}\r\n\r\nexport function returnToLobby() {\r\n  invalidSocket(socket);\r\n\r\n  socket.emit('returnToLobby', userId);\r\n}\r\n\r\nexport function startGame() {\r\n  invalidSocket(socket);\r\n\r\n  socket.emit('startGame', userId);\r\n}\r\n\r\nexport function sendMafiaMessage(message, myIndex) {\r\n  invalidSocket(socket);\r\n\r\n  socket.emit('sendMafiaMessage', {\r\n    userId,\r\n    message,\r\n    index: myIndex,\r\n  });\r\n}\r\n\r\nexport function votePlayer(myIndex, targetIndex) {\r\n  invalidSocket(socket);\r\n  \r\n  socket.emit('voteMafiaPlayer', {\r\n    userId,\r\n    myIndex,\r\n    targetIndex,\r\n  });\r\n}\r\n\r\nexport function voteGuiltyMafia(myIndex, decision) {\r\n  invalidSocket(socket);\r\n  socket.emit('voteMafiaGuilty', {\r\n    userId,\r\n    myIndex,\r\n    decision,\r\n  });\r\n}\r\n\r\nexport function interactMafia(myIndex, targetIndex) {\r\n  invalidSocket(socket);\r\n\r\n  socket.emit('interactMafia', {\r\n    userId,\r\n    myIndex,\r\n    targetIndex,\r\n  });\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport store from 'redux-store';\r\nimport {connectToServer, updateMyName} from '../Games/socketHandlers';\r\nimport {\r\n  setGameName\r\n} from 'redux-store/actions/nameActions';\r\n\r\nimport './games.scss';\r\n\r\n/**\r\n * List of all games available to play. Make sure this matches up with the server\r\n */\r\nconst allGames = [\r\n  'spyfall',\r\n  'mafia',\r\n];\r\n\r\nfunction mapStateToProps(state) {\r\n  const gc = state.gameCredentials;\r\n  return {\r\n    isConnected: gc.isConnected,\r\n    isUpdatingName: gc.isUpdatingName,\r\n    gamename: gc.gamename,\r\n  };\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setGameInfo: (name, gamename) => {\r\n      updateMyName(name);\r\n      dispatch(setGameName(gamename));\r\n    }\r\n  }\r\n}\r\nfunction Games(props) {\r\n  const { isConnected, gamename, isUpdatingName, setGameInfo } = props;\r\n  const [name, setName] = useState(store.getState().gameCredentials.username);\r\n\r\n  useEffect ( () => {\r\n    document.title = \"Games\";\r\n    \r\n    if (process.env.REACT_APP_DESIGN !== \"true\") {\r\n      if (!isConnected) { \r\n        connectToServer();\r\n      }\r\n    }\r\n  }, [isConnected]);\r\n\r\n  function handleChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  if (Boolean(gamename) && isConnected && isUpdatingName) {\r\n    if (((process.env.NODE_ENV === \"development\" && process.env.REACT_APP_DESIGN === 'false') || process.env.NODE_ENV===\"production\")) {\r\n      return (\r\n        <Redirect push to={`/games/${gamename}`}/>\r\n      );\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"games-page-wrapper\">\r\n      <h1 className=\"header\">Games</h1>\r\n      <h3 className=\"input-message\">Please create your username before continuing.</h3>\r\n      <div className=\"input\">\r\n        <TextField\r\n          id=\"filled-required\"\r\n          label=\"Required\"\r\n          variant=\"filled\"\r\n          value={name}\r\n          onChange={handleChange}\r\n          helperText=\"If no name is given, a default one will be generated\"\r\n        />\r\n      </div>\r\n\r\n\r\n      <div className=\"buttons-wrapper\">\r\n        {\r\n          allGames.map(val =>\r\n            <Button \r\n              key={val}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={!isConnected}\r\n              onClick={() => setGameInfo(name, val)}\r\n            >\r\n              {val}\r\n            </Button>\r\n          )\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SubscribedGames = connect(mapStateToProps, mapDispatchToProps)(Games);\r\nexport default SubscribedGames;","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport { returnToLobby } from 'Games/socketHandlers';\r\n\r\nimport './backToLobby.scss';\r\n\r\nfunction goBack() {\r\n  returnToLobby();\r\n}\r\n\r\nfunction BackToLobby() {\r\n  return (\r\n    <div className=\"backToLobby-wrapper\">\r\n      <IconButton aria-label=\"go-back\" color=\"primary\" onClick={goBack}>\r\n        <ArrowBackIcon />\r\n      </IconButton>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BackToLobby;","import React, {useState} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {Redirect} from 'react-router-dom';\r\nimport './spyfall.scss';\r\n\r\nimport BackToLobby from 'components/BackToLobby/backToLobby';\r\n\r\nimport { \r\n  handleLocationSpyfall,\r\n  addNameSpyfall,\r\n  removeNameSpyfall,\r\n} from 'redux-store/actions/spyfallActions';\r\nimport store from 'redux-store';\r\n\r\nfunction mapStateToProps(state) {\r\n  const gd = state.gameData;\r\n  const ps = state.playState;\r\n  const game = ps.spyfall;\r\n  \r\n  return {\r\n    gameCredentials: state.gameCredentials,\r\n    \r\n    time: ps.time,\r\n    gameType: gd.settings.spyfall.gameType,\r\n    isPlaying: gd.isPlaying,\r\n    selectedLocations: game.selectedLocations,\r\n    selectedNamesByIndex: game.selectedNamesByIndex,\r\n    isSpy: game.spyIndex === gd.myIndex,\r\n    locations: game.locations,\r\n    secretLocation: game.secretLocation,\r\n  };\r\n}\r\nfunction getValues() {\r\n  const gd = store.getState().gameData;\r\n  return {\r\n    members: gd.members,\r\n    myIndex: gd.myIndex,\r\n  };\r\n}\r\n\r\nfunction getDescriptor(gameType) {\r\n  switch(gameType) {\r\n    case 'Foods': {\r\n      return 'food';\r\n    }\r\n    case 'Animals' : {\r\n      return 'animal';\r\n    }\r\n    default: return 'location';\r\n  }\r\n}\r\nfunction Spyfall(props) {\r\n  const {\r\n    gameCredentials,\r\n    time,\r\n    gameType,\r\n    selectedLocations,\r\n    selectedNamesByIndex,\r\n    isSpy,\r\n    locations,\r\n    secretLocation,\r\n    isPlaying,\r\n  } = props;\r\n  \r\n  const [obj, ] = useState(getValues());\r\n  const {\r\n    members, \r\n    myIndex\r\n  } = obj;\r\n\r\n  if(!isPlaying) {\r\n    return <Redirect to=\"/games/spyfall\" />;\r\n  }\r\n\r\n\r\n  function getSelectedClassN(val, set, addCall, removeCall) {\r\n    const isSelected = set.has(val);\r\n    let callback = addCall;\r\n    let selectClass = \"\";\r\n    if (isSelected) {\r\n      callback = removeCall;\r\n      selectClass = \"selected\";\r\n    }\r\n    return [selectClass, (data) => store.dispatch(callback(val))];\r\n  }\r\n\r\n  function renderNames() {\r\n    return members.map( (name, index) => {\r\n      const [selectClass, callback] = getSelectedClassN(index, selectedNamesByIndex, addNameSpyfall, removeNameSpyfall);\r\n      return (\r\n        <h4 key={`${name}${index}`}\r\n         className={selectClass}\r\n         onClick={callback}>\r\n          {name}\r\n        </h4>\r\n      )\r\n    })\r\n  }\r\n\r\n  function locationSelectHandler(data) {\r\n    store.dispatch(handleLocationSpyfall(data));\r\n  }\r\n  function getSelectedClassL(val) {\r\n    const state = selectedLocations.get(val);\r\n    switch(state) {\r\n      case 0: {\r\n        return \"\";\r\n      }\r\n      case 1: {\r\n        return \"accept\";\r\n      }\r\n      case 2: {\r\n        return \"ignore\";\r\n      }\r\n      default: {\r\n        return \"\";\r\n      }\r\n    }\r\n  }\r\n  function renderLocations() {\r\n    return locations.map( (value, index) => {\r\n      const selectClass = getSelectedClassL(value);\r\n      return (\r\n        <div\r\n          key={value} \r\n          className={`location vertically-center-text ${selectClass}`}\r\n          onClick={locationSelectHandler}\r\n        > \r\n          <p>{value}</p>\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  function renderTime() {\r\n    const minutes = Math.floor(time / 60); \r\n    const seconds = time % 60;\r\n\r\n    return <h3>{minutes}:{seconds.toString().padStart(2, '0')}</h3>\r\n  }\r\n  \r\n  const headerRow = myIndex === 0\r\n  ? <div className=\"header-row\">\r\n      <BackToLobby />\r\n      <h1>Play Spyfall</h1>\r\n      {/* <BackToLobby /> */}\r\n    </div>\r\n  : <div className=\"header-row\">\r\n      <h1>Play Spyfall</h1>\r\n    </div>\r\n\r\n  return (\r\n    <div className=\"wrapper play-games-wrapper spyfall-page-wrapper\">\r\n      <div className=\"header\">\r\n        {headerRow}\r\n        <h4>Your name is: {gameCredentials.username}</h4>\r\n          {\r\n            isSpy \r\n            ? <h4>You ARE the spy! <span role=\"img\" aria-label=\"spy emoji\">🕵️</span> <br/> Figure out the secret {getDescriptor(gameType)}!</h4>\r\n            : <h4>You are NOT the spy. <br/> The {getDescriptor(gameType)} is <span className=\"secret-location\">{secretLocation}</span></h4>\r\n          }\r\n        \r\n        <div className=\"time-wrapper\">\r\n          {renderTime()}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"players-list\">\r\n        <h2 className=\"title\">Players</h2>\r\n        <div className=\"names\">\r\n          {\r\n            renderNames()\r\n          }\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"location-section\">\r\n        <h2 className=\"header\">{gameType}</h2>\r\n        <div className=\"location-wrapper\">\r\n          {\r\n            renderLocations()\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n}\r\nconst SubscribedSpyfall = connect(mapStateToProps)(Spyfall);\r\nexport default SubscribedSpyfall;","import Spyfall from './spyfall';\r\n\r\n\r\nexport default Spyfall;","import React, {useState} from 'react';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\n\r\nimport store from 'redux-store';\r\nimport './role.scss';\r\n\r\n// Enum from server\r\nconst ROLES = {\r\n  VILLAGER : 0,\r\n  DETECTIVE : 1,\r\n  MEDIC : 2,\r\n  MAFIA : 3,\r\n  GODFATHER : 4,\r\n  SK : 5,\r\n  JOKER : 6,\r\n  NUM_ROLES : 7,\r\n};\r\n\r\nfunction TeamName(props) {\r\n  return <h2 className=\"team\">Team: {props.children}</h2>\r\n}\r\n\r\nfunction RoleName(props) {\r\n  return <h3 className=\"role\">Role: {props.children}</h3>\r\n}\r\n\r\nfunction PowerInfo(props) {\r\n  return <p className=\"power-info\">Power: {props.children}</p>\r\n}\r\n\r\nfunction WinCondition(props) {\r\n  return <h3 className=\"win-condition\">Winning Condition: {props.children}</h3>\r\n}\r\n\r\n/**\r\n * Function to return relevant string values for populating card information\r\n * The default case will be a villager. \r\n * @param {number} role \r\n */\r\nfunction getRoleDetails(role) {\r\n  switch(role) {\r\n    case ROLES.DETECTIVE: {\r\n      return {\r\n        teamName: 'Village',\r\n        roleName: 'Detective',\r\n        powerInfo: 'At night, you can check a player as to whether or not they are mafia.',\r\n        winCondition: 'All Non-Villagers are eliminated.',\r\n      }\r\n    }\r\n    case ROLES.MEDIC: {\r\n      return {\r\n        teamName: 'Village',\r\n        roleName: 'Medic',\r\n        powerInfo: 'At night, you can rescue a player from being executed. You will not know who was targeted.',\r\n        winCondition: 'All Non-Villagers are eliminated.',\r\n      }\r\n    }\r\n    case ROLES.MAFIA: {\r\n      return {\r\n        teamName: 'Mafia',\r\n        roleName: 'Mafia Member',\r\n        powerInfo: 'At night, you (and your team) vote to execute a single player.',\r\n        winCondition: 'All Villagers are eliminated.',\r\n      }\r\n    }\r\n\r\n    default: {\r\n      return {\r\n        teamName: 'Village',\r\n        roleName: 'Detective',\r\n        powerInfo: 'None',\r\n        winCondition: 'All Non-Villagers are eliminated.',\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport function RoleCard() {\r\n  const [isMini, setIsMini] = useState(true);\r\n  const [roleInfo, ] = useState(getRoleDetails(store.getState().playState.mafia.role));\r\n  \r\n  \r\n  const Icon = isMini ? ExpandMoreIcon : ExpandLessIcon;\r\n  const rwclass = `papermui ${roleInfo.teamName} ${isMini ? 'mini' : ''}`;\r\n  return (\r\n    <div id=\"role-wrapper\" className={rwclass}>\r\n      <div className=\"role-info\" onClick={\r\n        isMini\r\n        ? () => setIsMini(false)\r\n        : () => setIsMini(true)\r\n      }>\r\n        <TeamName>{roleInfo.teamName}</TeamName>\r\n        <RoleName>{roleInfo.roleName}</RoleName>\r\n        <Icon className=\"icon\" />\r\n      </div>\r\n      <PowerInfo>{roleInfo.powerInfo}</PowerInfo>\r\n      <WinCondition>{roleInfo.winCondition}</WinCondition>\r\n    </div>\r\n  );\r\n}","\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport deadimg from 'assets/images/dead.png';\r\nimport './player.scss';\r\nimport { votePlayer, interactMafia } from 'Games/socketHandlers';\r\n\r\nconst aliveStatus = <h4 className=\"alive\">Alive</h4>\r\nconst deadStatus = <h4 className=\"dead\">Dead</h4>\r\n\r\nfunction renderInteraction(profile, phase, index, myIndex, isSelected, isRecapPeriod, someoneOnTrial, iAmDead) {\r\n  \r\n  if (!profile.isAlive) {\r\n    return (\r\n      <div className=\"dead-img-wrapper\">\r\n        <img className=\"dead-img\" alt=\"dead\" src={deadimg} />\r\n      </div>\r\n    );\r\n  }\r\n  if (iAmDead) {\r\n    return (\r\n      <div className=\"vote-button-wrapper\">\r\n        <div>\r\n          <h4>You have died. You can no longer interact</h4>\r\n        </div>\r\n        <div className=\"vote-count\">\r\n          <h4>Role:</h4>\r\n          <h4>Villager</h4>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  if (isRecapPeriod || phase === 0) {\r\n    return (\r\n      <div className=\"empty-area-wrapper\">\r\n        <div className=\"empty-area\">\r\n          <h2>Wait until Day!</h2>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  const isDay = phase % 2 === 0;\r\n  let selectClass = '';\r\n  if(isSelected) {\r\n    selectClass=\"selected \";\r\n  }\r\n  if(someoneOnTrial) {\r\n    selectClass +=\"disabled\";\r\n  }\r\n  if (isDay) {\r\n    function onClick() {\r\n      if(someoneOnTrial) {return;}\r\n      votePlayer(myIndex, index);\r\n    }\r\n    return (\r\n      <div className=\"vote-button-wrapper\">\r\n        <div className={`vote-button ${selectClass}`} onClick={onClick}><h2>Vote</h2></div>\r\n        <div className=\"vote-count\">\r\n          <h4>Total count</h4>\r\n          <h4 className=\"count\">{profile.numVotes}</h4>\r\n        </div>\r\n      </div>\r\n    );\r\n  } \r\n  else {\r\n    function interact() {\r\n      interactMafia(myIndex, index);\r\n    }\r\n    return (\r\n      <div className=\"interact-button-wrapper\">\r\n        <div className={`interact-button ${selectClass}`} onClick={interact}>\r\n          <h2>Interact</h2>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction PlayerCard(props) {\r\n  const { member, index, myIndex, profile, phase, isSelected, isRecapPeriod, someoneOnTrial, iAmDead, } = props;\r\n\r\n  const playerClass = `papermui player${index === myIndex ? ' my-player' : ''}`;\r\n  return (\r\n    <div className={playerClass}>\r\n      <div className=\"info\">\r\n        <h3 className=\"name\">{member}</h3>\r\n      </div>\r\n      {renderInteraction(profile, phase, index, myIndex, isSelected, isRecapPeriod, someoneOnTrial, iAmDead)}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nPlayerCard.propTypes = {\r\n  member: PropTypes.string.isRequired,\r\n  isAlive: PropTypes.bool.isRequired,\r\n}\r\n\r\nexport { PlayerCard };","/* eslint-disable */\r\nimport React, {useLayoutEffect} from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './eventRecap.scss';\r\nconst SCROLL_THRESHOLD = 30;\r\nconst CHAT_BOX_HEIGHT = 550;\r\nfunction interpretPhase(phase) {\r\n  const isEven = phase % 2 === 0;\r\n  if (isEven) {\r\n    return `Day ${phase / 2}`;\r\n  }\r\n  return `Night ${(phase+1) / 2}`;\r\n}\r\nfunction EventRecap(props) {\r\n  const { chatHistory } = props;\r\n\r\n  useLayoutEffect(() => {\r\n    const element = document.getElementById(\"event-recap\");\r\n    \r\n    if (element.scrollHeight - element.scrollTop < SCROLL_THRESHOLD + CHAT_BOX_HEIGHT) {\r\n      element.scrollTo(0, element.scrollHeight);\r\n    }\r\n  });\r\n  \r\n  return (\r\n    <div id=\"event-recap\" className=\"papermui\">\r\n      <h3 className=\"description\">Event Recap: Recorded here will be all the game actions (votes made, time of murders).</h3>\r\n      {\r\n        chatHistory.map((messageList, phase) => {\r\n          const phaseText = interpretPhase(phase);\r\n          return (\r\n            <React.Fragment key={phaseText}>\r\n            <div className=\"new-phase\">\r\n              {phaseText}\r\n            </div>\r\n            <ul>\r\n              {\r\n                messageList.map((messageItem, index) => {\r\n                  const {audience, message} = messageItem;\r\n                  const messageClass = `message-${audience}`;\r\n                  return (\r\n                    <li className={messageClass} key={`${message}${index}`}>{message}</li>\r\n                  )\r\n                })\r\n              }\r\n            </ul>\r\n            </React.Fragment>\r\n          );\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    chatHistory: state.playState.mafia.chatHistory,\r\n  };\r\n}\r\n\r\n\r\nconst SubscribedEventRecap = connect(mapStateToProps)(EventRecap);\r\nexport default SubscribedEventRecap;\r\n\r\n\r\n\r\n{/* <div className=\"new-phase\">\r\n        <h4>Day 0</h4>\r\n      </div>\r\n      <ul>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n      </ul>\r\n      <div className=\"new-phase\">\r\n        <h4>Night 1</h4>\r\n      </div>\r\n      \r\n      <ul>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        \r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n        <li>\r\n          zendaya voted for nobody\r\n        </li>\r\n        <li>\r\n          nobody was lynched!\r\n        </li>\r\n      </ul> */}","import React, {useState} from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport ArrowForward from '@material-ui/icons/ArrowForward';\r\n\r\nimport store from 'redux-store';\r\nimport { sendMafiaMessage } from 'Games/socketHandlers';\r\n\r\nconst ENTER_KEY = 13;\r\n\r\nexport default function TextInput() {\r\n  const [message, setMessage] = useState(\"\");\r\n  const [myIndex, ] = useState(store.getState().gameData.myIndex)\r\n  const preventDefault = (e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  function handleKeyPress(e) {\r\n    if (e.which === ENTER_KEY || e.keyCode === ENTER_KEY) {\r\n      submit();\r\n    }\r\n  }\r\n\r\n  function submit() {\r\n    if(Boolean(message)) { //length greater than 0\r\n      sendMafiaMessage(message, myIndex);\r\n      setMessage(\"\");\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <FormControl id=\"event-recap-input\" variant=\"outlined\">\r\n      <Input\r\n        className=\"event-input\"\r\n        id=\"standard-basic\"\r\n        value={message}\r\n        onChange={(e) => {setMessage(e.target.value);}}\r\n        onKeyPress={handleKeyPress}\r\n        endAdornment={\r\n          <InputAdornment position=\"end\">\r\n            <IconButton\r\n              className=\"icon-color\"\r\n              children={<ArrowForward />}\r\n              onClick={submit}\r\n              size=\"small\"\r\n              onMouseDown={preventDefault}\r\n              edge=\"end\"\r\n            />\r\n          </InputAdornment>\r\n        }\r\n      />\r\n    </FormControl>\r\n  )\r\n}\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './roleCount.scss';\r\nfunction RoleName(props) {\r\n  return (\r\n    <div className=\"name\">\r\n      <p>{props.children}</p>\r\n    </div>\r\n  )\r\n}\r\nfunction RoleValue(props) {\r\n  return (\r\n    <div className=\"value\">\r\n      <p>{props.children}</p>\r\n    </div>\r\n  );\r\n}\r\nfunction RoleItem(props) {\r\n  return (\r\n    <div className=\"role-item\">\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    roleCount: state.playState.mafia.roleCount\r\n  };\r\n}\r\nfunction RoleCount(props) {\r\n  const roles = [];\r\n  const { mafiaCount, villagerCount, jokerCount, skCount, crazyExCount} = props.roleCount;\r\n  if (mafiaCount) {\r\n    roles.push(\r\n      <RoleItem key=\"mafia\">\r\n        <RoleName>Mafia</RoleName>\r\n        <RoleValue>{mafiaCount}</RoleValue>\r\n      </RoleItem>\r\n    );\r\n  };\r\n  if (villagerCount) {\r\n    roles.push(\r\n      <RoleItem key=\"villager\">\r\n        <RoleName>Villager</RoleName>\r\n        <RoleValue>{villagerCount}</RoleValue>\r\n      </RoleItem>\r\n    );\r\n  };\r\n  if (jokerCount) {\r\n    roles.push(\r\n      <RoleItem key=\"joker\">\r\n        <RoleName>Joker</RoleName>\r\n        <RoleValue>{jokerCount}</RoleValue>\r\n      </RoleItem>\r\n    );\r\n  };\r\n  if (skCount) {\r\n    roles.push(\r\n      <RoleItem key=\"sk\">\r\n        <RoleName>SK</RoleName>\r\n        <RoleValue>{skCount}</RoleValue>\r\n      </RoleItem>\r\n    )\r\n  }\r\n  return (\r\n    <div className=\"papermui role-count-wrapper\">\r\n      <h2>Role Distribution</h2>\r\n      {roles}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst SubscribedRoleCount = connect(mapStateToProps)(RoleCount);\r\nexport default SubscribedRoleCount;","import React from 'react';\r\n\r\nimport './court.scss';\r\nimport { \r\n  votePlayer,\r\n  voteGuiltyMafia,\r\n} from 'Games/socketHandlers';\r\nimport { connect } from 'react-redux';\r\n\r\nfunction mapStateToPropsClock(state) {\r\n  return {\r\n    time: state.playState.mafia.secondaryTime,\r\n  };\r\n}\r\nfunction Clock({time}) {\r\n  const minutes = Math.floor(time / 60); \r\n  const seconds = time % 60;\r\n\r\n  return (\r\n    <div className=\"time-wrapper\">\r\n      <h3>{minutes}:{seconds.toString().padStart(2, '0')}</h3>\r\n    </div>\r\n  );\r\n}\r\nconst SubscribedClock = connect(mapStateToPropsClock)(Clock);\r\n\r\nfunction Court(props) {\r\n  const {\r\n    onTrialName,\r\n    onTrialIndex,\r\n    isDefending,\r\n    myIndex,\r\n    phase,\r\n    isRecapPeriod,\r\n    isSelected,\r\n    numAbstain,\r\n    numGuilty,\r\n    numNotGuilty,\r\n    myGuiltyDecision,\r\n    iAmDead,\r\n  } = props;\r\n\r\n  if (iAmDead) {\r\n    return (\r\n      <div className=\"vertically-center-text empty-court\">\r\n        <h2>You have died. You can no longer interact.</h2>\r\n      </div>\r\n    )\r\n  }\r\n  function voteGuilty() {\r\n    voteGuiltyMafia(myIndex, 'guilty');\r\n  }\r\n\r\n  function voteNotGuilty() {\r\n    voteGuiltyMafia(myIndex, 'not guilty');\r\n  }\r\n  if(phase%2 === 0){ //isDay\r\n    if (!onTrialName) { //no one on trial && isDay\r\n      if (!isRecapPeriod) { // is not RecapPeriod && no one on trial && isDay\r\n        return (\r\n          <div className=\"vertically-center-text empty-court\">\r\n            <h2>You need to vote for someone to lynch!</h2>\r\n            <h3>Or you can decide against voting today</h3>\r\n            <div className={ `abstain papermui${isSelected ? ' selected' : ''}`} onClick={() => {votePlayer(myIndex, -2)}}>\r\n              <h2>Abstain</h2>\r\n            </div>\r\n            <h5>*Need a majority to abstain in order to pass the day.</h5>\r\n            <h2>Number of abstainees: {numAbstain}</h2>\r\n          </div>\r\n        )\r\n      }\r\n      // IS RecapPeriod && no one on trial && isDay\r\n      return (\r\n        <div className=\"vertically-center-text empty-court\">\r\n          <h3>Wait until night time.</h3>\r\n        </div>\r\n      );\r\n    }\r\n    // IS on trial && isDay\r\n    console.log('myGuiltyDecision:' + myGuiltyDecision);\r\n    // const iAmOnTrial = onTrialIndex === myIndex;\r\n    const iAmOnTrial = false;\r\n    let notGuiltyClass = `papermui button-padding`;\r\n    let guiltyClass = `papermui button-padding`;\r\n    if (!iAmOnTrial) {\r\n      notGuiltyClass += ' button';\r\n      guiltyClass += ' button';\r\n      const isG = myGuiltyDecision[0] === 'g';\r\n      const isN = myGuiltyDecision[0] === 'n';\r\n      if(isG) {\r\n        notGuiltyClass += ' inactive';\r\n        guiltyClass += ' active';\r\n      }\r\n      else if(isN){\r\n        notGuiltyClass += ' active';\r\n        guiltyClass += ' inactive';\r\n      }\r\n    }\r\n    let guiltyButtons = '';\r\n    if (!isDefending) {\r\n      if (!iAmOnTrial) {\r\n        guiltyButtons = (\r\n          <>\r\n          <div className=\"court-decision not-guilty-wrapper\">\r\n            <div className={notGuiltyClass} onClick={voteNotGuilty}>\r\n              <h2>Not Guilty</h2>\r\n            </div>\r\n            <div className=\"voters\">\r\n              <h3>Total Votes</h3>\r\n              <h2>{numNotGuilty}</h2>\r\n            </div>\r\n          </div>\r\n          <div className=\"court-decision guilty-wrapper\">\r\n            <div className={guiltyClass} onClick={voteGuilty}>\r\n              <h2>Guilty</h2>\r\n            </div>\r\n            <div className=\"voters\">\r\n              <h3>Total Votes</h3>\r\n              <h2>{numGuilty}</h2>\r\n            </div>\r\n          </div>\r\n          </>\r\n        );\r\n      }\r\n      else {\r\n        guiltyButtons = (\r\n          <>\r\n          <div className=\"court-decision not-guilty-wrapper\">\r\n            <div className={notGuiltyClass}>\r\n              <h2>Not Guilty</h2>\r\n            </div>\r\n            <div className=\"voters\">\r\n              <h3>Total Votes</h3>\r\n              <h2>{numNotGuilty}</h2>\r\n            </div>\r\n          </div>\r\n          <div className=\"court-decision guilty-wrapper\">\r\n            <div className={guiltyClass}>\r\n              <h2>Guilty</h2>\r\n            </div>\r\n            <div className=\"voters\">\r\n              <h3>Total Votes</h3>\r\n              <h2>{numGuilty}</h2>\r\n            </div>\r\n          </div>\r\n          </>\r\n        )\r\n      }\r\n    }\r\n    return (\r\n      <div className=\"court\">\r\n        <div className=\"on-trial\">\r\n          <h2>On Trial</h2>\r\n          <h1>{onTrialName}</h1>\r\n          <SubscribedClock />\r\n          <h4>Need a simple majority (more guilty votes than non-guilty).</h4>\r\n        </div>\r\n        {guiltyButtons}\r\n      </div>\r\n    );\r\n  }\r\n  // isNight\r\n  return ( \r\n    <div className=\"flex vertically-center-text empty-court\">\r\n      <h2>Use your power, if you can! Otherwise, wait until day time to vote.</h2>\r\n      <h5>If you are attacked, your screen will flash red! If you are saved, your screen will afterwards flash green. </h5>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n  const members = state.gameData.members;\r\n  const { numAbstain, onTrial, isDefending, numGuilty, numNotGuilty, myGuiltyDecision} = state.playState.mafia;\r\n  return {\r\n    ...ownProps,\r\n    numAbstain,\r\n    onTrialName: members[onTrial],\r\n    onTrialIndex: onTrial,\r\n    isDefending,\r\n    numGuilty,\r\n    numNotGuilty,\r\n    myGuiltyDecision,\r\n  }\r\n}\r\n\r\nconst SubscribedCourt = connect(mapStateToProps)(Court);\r\nexport default SubscribedCourt;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {Redirect} from 'react-router-dom';\r\nimport Brightness2Icon from '@material-ui/icons/Brightness2';\r\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\r\n\r\nimport BackToLobby from 'components/BackToLobby/backToLobby';\r\nimport {RoleCard} from './components/role';\r\nimport {PlayerCard} from './components/player';\r\nimport EventRecap from './components/eventRecap';\r\nimport EventInput from './components/eventRecapInput';\r\nimport RoleCount from './components/roleCount';\r\nimport Court from './components/court';\r\nimport store from 'redux-store';\r\n\r\nimport './mafia.scss';\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\n// window.onscroll = function(ev) {\r\n//   if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\r\n//       // you're at the bottom of the page\r\n//   }\r\n// };\r\n\r\nfunction interpretPhase(phase) {\r\n  const isEven = phase % 2 === 0;\r\n  if (isEven) {\r\n    return `day`;\r\n  }\r\n  else {\r\n    return `night`;\r\n  }\r\n}\r\n\r\nfunction Column3({isDay}) {\r\n  return (\r\n    <div className=\"column3\">\r\n      \r\n      <div className=\"day-night-time\">\r\n        <div className=\"row\">\r\n          <h1>{isDay ? 'Day' : 'Night  '}</h1>\r\n          {isDay ? <Brightness7Icon/> : <Brightness2Icon/>}\r\n        </div>\r\n      </div>\r\n\r\n      <RoleCard />\r\n      <RoleCount />\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToPropsC2(state, ownProps) {\r\n  const { myTarget, isRecapPeriod, iAmDead } = state.playState.mafia;\r\n  return {\r\n    ...ownProps,\r\n    targetIndex: myTarget,\r\n    isRecapPeriod, \r\n    iAmDead,\r\n  };\r\n}\r\nfunction Column2({myIndex, phase, targetIndex, isRecapPeriod, iAmDead}) {\r\n  return (\r\n    <div className=\"column2\">\r\n      <SubscribedPlayerList\r\n        phase={phase}\r\n        isRecapPeriod={isRecapPeriod}\r\n        myIndex={myIndex}\r\n        targetIndex={targetIndex}\r\n        iAmDead={iAmDead}\r\n      />\r\n      <Court\r\n        myIndex={myIndex}\r\n        phase={phase}\r\n        isRecapPeriod={isRecapPeriod}\r\n        isSelected={targetIndex === -2}\r\n        iAmDead={iAmDead}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nconst SubcribedColumn2 = connect(mapStateToPropsC2)(Column2);\r\n\r\nfunction Column1() {\r\n  return (\r\n    <div className=\"column1\">\r\n      <EventRecap />\r\n      <EventInput />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToPropsClock(state) {\r\n  return {\r\n    time: state.playState.time,\r\n  };\r\n}\r\nfunction Clock({time}) {\r\n  const minutes = Math.floor(time / 60); \r\n  const seconds = time % 60;\r\n\r\n  return (\r\n    <div className=\"time-wrapper\">\r\n      <h3>{minutes}:{seconds.toString().padStart(2, '0')}</h3>\r\n    </div>\r\n  );\r\n}\r\nconst SubscribedClock = connect(mapStateToPropsClock)(Clock);\r\n\r\nfunction mapStateToPropsPL(state, ownProps) {\r\n  return {\r\n    ...ownProps,\r\n    someoneOnTrial: state.playState.mafia.onTrial>=0,\r\n    playerProfiles: state.playState.mafia.playerProfiles,\r\n  }\r\n}\r\nfunction PlayerList(props) {\r\n  const {\r\n    phase,\r\n    myIndex,\r\n    playerProfiles,\r\n    isRecapPeriod,\r\n    targetIndex,\r\n    someoneOnTrial,\r\n    iAmDead,\r\n  } = props;\r\n  \r\n  const [members,] = useState(store.getState().gameData.members);\r\n  return (\r\n    <div className=\"player-list\">\r\n      {\r\n        members.map( (member, index) => {\r\n          return <PlayerCard \r\n            key={`${member}${index}`} \r\n            phase={phase}\r\n            isRecapPeriod={isRecapPeriod}\r\n            member={member} \r\n            profile={playerProfiles[index]}\r\n            index={index}\r\n            isSelected={targetIndex === index}\r\n            myIndex={myIndex}\r\n            someoneOnTrial={someoneOnTrial}\r\n            iAmDead={iAmDead}\r\n          />\r\n        })\r\n      }\r\n    </div>\r\n  );\r\n}\r\nconst SubscribedPlayerList = connect(mapStateToPropsPL)(PlayerList);\r\n\r\nfunction Mafia(props) {\r\n  useEffect(() => {\r\n    document.title = 'Mafia';\r\n  });\r\n  const [myIndex, ] = useState(store.getState().gameData.myIndex);\r\n  const {\r\n    phase,\r\n    isPlaying,\r\n    wasAttacked,\r\n    wasSaved\r\n  } = props;\r\n\r\n  if(!isPlaying && (process.env.NODE_ENV === 'production' || (process.env.NODE_ENV === 'development' && process.env.REACT_APP_DESIGN === 'false'))) {\r\n    return (\r\n      <Redirect to=\"/games/mafia\" />\r\n    );\r\n  }\r\n  \r\n  const theme = interpretPhase(phase);\r\n  const isDay = theme === 'day';\r\n\r\n  const headerRow = myIndex === 0\r\n  ? <div className=\"header-row\">\r\n      <BackToLobby />\r\n      <h1>Play Mafia</h1>\r\n      {/* <BackToLobby /> */}\r\n    </div>\r\n  : <div className=\"header-row\">\r\n      <h1>Play Mafia</h1>\r\n    </div>\r\n\r\n  const savedClass = wasSaved ? 'saved' : '';\r\n  const attackedClass = wasAttacked ? 'attacked' : '';\r\n\r\n  return (\r\n    <div className={`wrapper play-games-wrapper mafia-page-wrapper ${theme} ${savedClass} ${attackedClass}`}>\r\n      <div className=\"header\">\r\n        {headerRow}\r\n        <SubscribedClock />\r\n      </div>\r\n\r\n      <div className=\"mafia-game-info\">\r\n\r\n        <Column1 />\r\n        <SubcribedColumn2 myIndex={myIndex} phase={phase} />\r\n        <Column3 isDay={isDay}/>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const gd = state.gameData;\r\n  const ps = state.playState;\r\n  const game = ps.mafia;\r\n  return {\r\n    phase: game.phase,\r\n    isPlaying: gd.isPlaying,\r\n    wasAttacked: game.wasAttacked,\r\n    wasSaved: game.wasSaved,\r\n  };\r\n}\r\n\r\nconst SubscribedMafia = connect(mapStateToProps)(Mafia);\r\nexport default SubscribedMafia;","import Mafia from './mafia';\r\n\r\n\r\nexport default Mafia;","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport store from 'redux-store';\r\nimport { ejectFromRoom } from 'Games/socketHandlers';\r\nimport { returnToGameSelect } from 'redux-store/actions/nameActions';\r\n\r\nimport './backToGameSelect.scss';\r\n\r\nfunction goBack() {\r\n  ejectFromRoom();\r\n  store.dispatch(returnToGameSelect());\r\n}\r\n\r\nfunction BackToGameSelect() {\r\n  return (\r\n    <div className=\"backToLobby-wrapper\">\r\n      <IconButton aria-label=\"go-back\" color=\"primary\" onClick={goBack}>\r\n        <ArrowBackIcon />\r\n      </IconButton>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BackToGameSelect;","import React, {useState} from 'react';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport ArrowForward from '@material-ui/icons/ArrowForward';\r\n\r\nimport {joinRoom} from '../../socketHandlers';\r\n\r\nconst ENTER_KEY = 13;\r\n\r\nexport default function TextInput() {\r\n  const [roomId, setRoomId] = useState(\"\");\r\n  const preventDefault = (e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  function submit() {\r\n    joinRoom(roomId);\r\n  }\r\n  function handleKeyPress(e) {\r\n    if (e.which === ENTER_KEY || e.keyCode === ENTER_KEY) {\r\n      submit();\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <FormControl className=\"form-wrapper\" variant=\"outlined\">\r\n      <InputLabel htmlFor=\"outlined-adornment-roomid\">Room ID</InputLabel>\r\n      <OutlinedInput\r\n        id=\"outlined-adornment-roomid\"\r\n        value={roomId}\r\n        onChange={(e) => {setRoomId(e.target.value);}}\r\n        onKeyPress={handleKeyPress}\r\n        endAdornment={\r\n          <InputAdornment position=\"end\">\r\n            <IconButton\r\n              children={<ArrowForward />}\r\n              onClick={submit}\r\n              onMouseDown={preventDefault}\r\n              edge=\"end\"\r\n            />\r\n          </InputAdornment>\r\n        }\r\n        labelWidth={70}\r\n      />\r\n    </FormControl>\r\n  )\r\n}\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport store from 'redux-store';\r\nimport { createRoomWithSettings, updateRoomSettings } from 'Games/socketHandlers';\r\nimport { setSettingsIsUpdating, lobbyStates } from 'redux-store/actions/gameSetupActions';\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n  const selectedChoice = state.gameData.selectedChoice;\r\n  const isUpdating = state.gameData.isUpdating;\r\n  return {\r\n    ...ownProps,\r\n    selectedChoice,\r\n    isUpdating,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setIsUpdating: () => {\r\n      dispatch(setSettingsIsUpdating());\r\n    }\r\n  }\r\n}\r\n\r\nfunction SubmitSettings(props) {\r\n  const {settings, selectedChoice, isUpdating, setIsUpdating, isValid} = props;\r\n  const isCreating = selectedChoice === lobbyStates.CREATE;\r\n\r\n  function createRoom() {\r\n    if (isCreating) {\r\n      createRoomWithSettings(store.getState().gameData.settings);\r\n    }\r\n    else {\r\n      setIsUpdating();\r\n      updateRoomSettings(settings);\r\n    }\r\n  }\r\n\r\n  return(\r\n    <Button disabled={!isValid || (!isCreating && isUpdating)} variant=\"contained\" onClick={createRoom}>\r\n      {isCreating ? 'Create' : 'Save'} \r\n    </Button>\r\n  );\r\n}\r\n\r\nconst SubscribedSubmitSettings = connect(mapStateToProps, mapDispatchToProps)(SubmitSettings);\r\nexport default SubscribedSubmitSettings;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\nimport { roomPrivacyToggled } from \"redux-store/actions/gameSetupActions\";\r\n\r\nimport './aloneSwitch.scss';\r\n\r\nconst mapStateToProps = (state) => {\r\n  const {settings} = state.gameData;\r\n  return {\r\n    isPrivate: settings.isPrivate,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    handleSwitch: (e) => {\r\n      dispatch(roomPrivacyToggled());\r\n    }\r\n  }\r\n}\r\n\r\nfunction PrivateSwitch(props) {\r\n  const {isPrivate, handleSwitch} = props;\r\n\r\n  return (\r\n    <div className=\"setting\">\r\n      <h3>Do you want a public or private room?</h3>\r\n      <div className=\"switch-wrapper\">\r\n        <p>Public</p>\r\n        <Switch\r\n          checked={isPrivate}\r\n          onChange={handleSwitch}\r\n          color=\"primary\"\r\n          name=\"checked\"\r\n          inputProps={{ 'aria-label': 'primary checkbox' }}\r\n        />\r\n        <p>Private</p>\r\n      </div>\r\n      <h6>*At this time, this setting cannot be later changed.</h6>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SubscribedPrivateSwitch = connect(mapStateToProps, mapDispatchToProps)(PrivateSwitch);\r\nexport default SubscribedPrivateSwitch;","import React from 'react';\r\n\r\nexport function SettingsItem({children}) {\r\n  return (\r\n    <div className=\"settings-item\">\r\n      {children}\r\n    </div>\r\n  )\r\n} \r\n\r\nexport function SettingsName({children}) {\r\n  return (\r\n    <div className=\"item-name\">\r\n      <h3>{children}</h3>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function SettingsValue({children}) {\r\n  return (\r\n    <div className=\"item-value\">\r\n      <h3>{children}</h3>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {SettingsItem, SettingsName, SettingsValue} from '../settingsView';\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.gameData.settings.mafia\r\n  };\r\n}\r\nfunction MafiaView(props) {\r\n  const { dayTimeLimit, nightTimeLimit, defenseTimeLimit, numMafia} = props;\r\n  return (\r\n    <div className=\"settings-list\">\r\n      <SettingsItem>\r\n        <SettingsName>Day Time Limit</SettingsName>\r\n        <SettingsValue>{`${dayTimeLimit} seconds`}</SettingsValue>\r\n      </SettingsItem>\r\n      <SettingsItem>\r\n        <SettingsName>Night Time Limit</SettingsName>\r\n        <SettingsValue>{`${nightTimeLimit} seconds`}</SettingsValue>\r\n      </SettingsItem>\r\n      <SettingsItem>\r\n        <SettingsName>Defense Time Limit</SettingsName>\r\n        <SettingsValue>{`${defenseTimeLimit} seconds`}</SettingsValue>\r\n      </SettingsItem>\r\n      <SettingsItem>\r\n        <SettingsName>Number of Mafia</SettingsName>\r\n        <SettingsValue>{numMafia}</SettingsValue>\r\n      </SettingsItem>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst SubscribedMafiaView = connect(mapStateToProps)(MafiaView);\r\nexport default SubscribedMafiaView;","import React, {useState} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\n\r\nimport SubmitSettings from 'Games/Settings/submitSettings';\r\nimport PrivateSwitch from '../privateSwitch';\r\nimport store from 'redux-store';\r\n\r\nimport './mafiaSettings.scss';\r\n\r\n\r\nconst MAX_TIME = 600;\r\nexport function isValidTimeLimit(time) {\r\n  return /^\\d+$/.test(time) && Number.parseInt(time) <= MAX_TIME;\r\n}\r\nexport function isValidDayTimeLimit(time) {\r\n  const isInteger = /^(\\+|-)?\\d+$/.test(time);\r\n  if (!isInteger) {\r\n    return 'Must be an integer at most 600.';\r\n  }\r\n  const sizeMet = Number.parseInt(time) <= MAX_TIME;\r\n  if (!sizeMet) {\r\n    return 'Too large';\r\n  }\r\n  return '';\r\n\r\n}\r\nexport function isValidMafia(num) {\r\n  const isInteger = /^(\\+|-)?\\d+$/.test(num);\r\n  if (!isInteger) {\r\n    return 'Must be an integer.';\r\n  }\r\n  const sizeMet = Number.parseInt(num) < store.getState().gameData.members.length;\r\n  if (!sizeMet) {\r\n    return 'Too large';\r\n  }\r\n  return '';\r\n}\r\n\r\n\r\nfunction TimeLimit(props) {\r\n  const { time, validTime, setTime, children, quantity } = props;\r\n  const question = children[0];\r\n  const errormsg = children[1];\r\n  const explanation = children[2];\r\n  let error = !validTime;\r\n\r\n  let inputProps = {\r\n    className: \"time-input\",\r\n    label: \"Time\",\r\n    value: time,\r\n    onChange: handleChange,\r\n    endAdornment: <InputAdornment position=\"end\">sec</InputAdornment>, \r\n  }\r\n  if (quantity) {\r\n    inputProps.className = \"quantity-input\";\r\n    delete inputProps.endAdornment;\r\n  }\r\n\r\n  function handleChange(e) {\r\n    setTime(e.target.value);\r\n  }\r\n  return (\r\n    <div className=\"setting\">\r\n      {question}\r\n      {explanation}\r\n      <FormControl error={error}>\r\n        <Input\r\n          {...inputProps}\r\n        />\r\n        {\r\n          error\r\n          ? errormsg\r\n          : ''\r\n        }\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToPropsMS(state, ownProps) {\r\n  return {\r\n    numMembers: state.gameData.members.length,\r\n    ...ownProps\r\n  };\r\n}\r\n\r\nfunction MafiaSettings(props) {\r\n  const { showPrivacy, isLobbyPrivate } = props;\r\n\r\n  const [dayTimeLimit, setDayTimeLimit] = useState(store.getState().gameData.settings.mafia.dayTimeLimit);\r\n  const [nightTimeLimit, setNightTimeLimit] = useState(store.getState().gameData.settings.mafia.nightTimeLimit);\r\n  const [defenseTimeLimit, setDefenseTimeLimit] = useState(store.getState().gameData.settings.mafia.defenseTimeLimit);\r\n  const [numMafia, setNumMafia] = useState(store.getState().gameData.settings.mafia.numMafia);\r\n\r\n  const dayTimeMessage = isValidDayTimeLimit(dayTimeLimit);\r\n  const isValidNightTime = isValidTimeLimit(nightTimeLimit);\r\n  const isValidDefenseTime = isValidTimeLimit(defenseTimeLimit);\r\n  const mafiaMessage = isValidMafia(numMafia);\r\n\r\n  const allValid = !dayTimeMessage && isValidNightTime && isValidDefenseTime && !mafiaMessage;\r\n  \r\n  const settings = {\r\n    isPrivate: isLobbyPrivate, \r\n    mafia: {\r\n      dayTimeLimit, \r\n      nightTimeLimit,\r\n      defenseTimeLimit,\r\n      numMafia,\r\n      allowJoker: false,\r\n      allowSK: false,\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"settings-wrapper mafia-settings\">\r\n        { showPrivacy ? <PrivateSwitch /> : ''}\r\n\r\n        <TimeLimit time={dayTimeLimit} setTime={setDayTimeLimit} validTime={!dayTimeMessage}>\r\n          <h3>How long is the day phase?</h3>\r\n          <FormHelperText>{dayTimeMessage}</FormHelperText>\r\n          <h6>A negative value will have day time continue until everyone abstains or someone is killed.</h6>\r\n        </TimeLimit>\r\n\r\n        <TimeLimit time={nightTimeLimit} setTime={setNightTimeLimit} validTime={isValidNightTime}>\r\n          <h3>How long is the night phase?</h3>\r\n          <FormHelperText>Must be an integer at most {MAX_TIME}</FormHelperText>\r\n        </TimeLimit>\r\n\r\n        <TimeLimit time={defenseTimeLimit} setTime={setDefenseTimeLimit} validTime={isValidDefenseTime}>\r\n          <h3>How long is the defense?</h3>\r\n          <FormHelperText>Must be an integer at most {MAX_TIME}</FormHelperText>\r\n        </TimeLimit>\r\n\r\n        <TimeLimit time={numMafia} setTime={setNumMafia} validTime={!mafiaMessage} quantity>\r\n          <h3>How many mafia are there?</h3>\r\n          <FormHelperText>{mafiaMessage}</FormHelperText>\r\n          <h6>A negative value will have the server pick an optimal number of mafia.</h6>\r\n        </TimeLimit>\r\n      </div>\r\n      <SubmitSettings isValid={allValid} settings={settings}/>\r\n    </> \r\n  )\r\n}\r\n\r\n\r\nconst SubscribedMafiaSettings = connect(mapStateToPropsMS)(MafiaSettings);\r\nexport default SubscribedMafiaSettings;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {SettingsItem, SettingsName, SettingsValue} from '../settingsView';\r\nfunction mapStateToProps(state) {\r\n  const {settings} = state.gameData;\r\n  \r\n  return {\r\n    time: settings.spyfall.time,\r\n    gameType: settings.spyfall.gameType,\r\n  };\r\n}\r\nfunction SpyfallView(props) {\r\n  const { time, gameType } = props;\r\n  return (\r\n    <div className=\"settings-list\">\r\n      <SettingsItem>\r\n        <SettingsName>Time Length</SettingsName>\r\n        <SettingsValue>{`${time} minutes`}</SettingsValue>\r\n      </SettingsItem>\r\n      <SettingsItem>\r\n        <SettingsName>Game Type</SettingsName>\r\n        <SettingsValue>{gameType}</SettingsValue>\r\n      </SettingsItem>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst SubscribedSpyfallView = connect(mapStateToProps)(SpyfallView);\r\nexport default SubscribedSpyfallView;","import React, {useState} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nimport SubmitSettings from 'Games/Settings/submitSettings';\r\nimport PrivateSwitch from '../privateSwitch';\r\nimport store from 'redux-store';\r\n\r\nimport './spyfallSettings.scss';\r\n\r\nconst MAX_SPYFALL_TIME = 100;\r\nexport function isValidTime(time) {\r\n  return /^\\d+$/.test(time) && Number.parseInt(time) < MAX_SPYFALL_TIME;\r\n}\r\n\r\nconst mapStateToPropsTL = (state, ownProps) => {\r\n  return {...ownProps};\r\n}\r\nfunction TimeLimit(props) {\r\n  const { time, validTime, setTime } = props;\r\n  let error = !validTime;\r\n\r\n  function handleChange(e) {\r\n    setTime(e.target.value);\r\n  }\r\n  return (\r\n    <div className=\"setting\">\r\n      <h3>How long is the game?</h3>\r\n      <FormControl error={error}>\r\n        <Input\r\n          className=\"time-input\"\r\n          id=\"standard\"\r\n          label=\"Time\"\r\n          value={time}\r\n          onChange={handleChange}\r\n          endAdornment={<InputAdornment position=\"end\">min</InputAdornment>}\r\n        />\r\n        {\r\n          error\r\n          ? <FormHelperText id=\"component-error-text\">Must be an integer less than {MAX_SPYFALL_TIME}</FormHelperText>\r\n          : ''\r\n        }\r\n      </FormControl>\r\n      \r\n    </div>\r\n  );\r\n}\r\nconst SubscribedTimeLimit = connect(mapStateToPropsTL)(TimeLimit);\r\n\r\nfunction mapStateToPropsGTS(state, ownProps) {\r\n  return {...ownProps};\r\n}\r\nfunction GameTypeSelector(props) {\r\n  const { gameType, setGameType } = props;\r\n  function handleChange(e) {\r\n    setGameType(e.target.value);\r\n  }\r\n  return (\r\n    <div className=\"setting\">\r\n      <h3>What category are the options?</h3>\r\n      <FormControl>\r\n        <Select\r\n          className=\"game-type-input\"\r\n          value={gameType}\r\n          onChange={handleChange}\r\n          inputProps={{ 'aria-label': 'Game Type' }}\r\n        >\r\n          <MenuItem value=\"Locations\">Locations</MenuItem>\r\n          <MenuItem value=\"Foods\">Foods</MenuItem>\r\n          <MenuItem value=\"Animals\">Animals</MenuItem>\r\n        </Select>\r\n        <FormHelperText>Game Type</FormHelperText>\r\n      </FormControl>\r\n    </div>\r\n  )\r\n}\r\nconst SubscribedGameTypeSelector = connect(mapStateToPropsGTS)(GameTypeSelector);\r\n\r\nexport default function SpyfallSettings(props) {\r\n  const { showPrivacy, isLobbyPrivate } = props;\r\n  const [time, setTime] = useState(store.getState().gameData.settings.spyfall.time);\r\n  const [gameType, setGameType] = useState(store.getState().gameData.settings.spyfall.gameType);\r\n  let validTime = isValidTime(time);\r\n\r\n  const settings = {\r\n    isPrivate: isLobbyPrivate,\r\n    spyfall: {\r\n      time,\r\n      gameType,\r\n    },\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"settings-wrapper spyfall-settings\">\r\n        { showPrivacy ? <PrivateSwitch /> : ''}\r\n        <SubscribedTimeLimit time={time} setTime={setTime} validTime={validTime}/>\r\n        <SubscribedGameTypeSelector gameType={gameType} setGameType={setGameType}/>\r\n      </div>\r\n      <SubmitSettings isValid={validTime} settings={settings}/>\r\n    </> \r\n  )\r\n}\r\n","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport MafiaView from './MafiaSettings/mafiaView';\r\nimport MafiaSettings from './MafiaSettings/mafiaSettings';\r\nimport SpyfallView from './SpyfallSettings/spyfallView';\r\nimport SpyfallSettings from './SpyfallSettings/spyfallSettings';\r\nimport store from 'redux-store';\r\n\r\nimport './settingsBoard.scss';\r\nimport { connect } from 'react-redux';\r\n\r\nfunction renderCurrentSettings(GameView) {\r\n  return <GameView />\r\n}\r\n\r\nfunction renderEditSettings(GameSettings, showPrivacy) {\r\n  return <GameSettings showPrivacy={showPrivacy} isLobbyPrivate={store.getState().gameData.settings.isPrivate} />;\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const isUpdating = state.gameData.isUpdating;\r\n  return {\r\n    isUpdating,\r\n  };\r\n}\r\n\r\nfunction renderStatusMessage(isUpdating, canEdit) {\r\n  if (canEdit) {\r\n    if(isUpdating) {\r\n      return <h3 className=\"status\">Updating...</h3>;\r\n    }\r\n    return <h3 className=\"status fade-out\">Updated</h3>;\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction SettingsBoard(props) {\r\n  const { canEdit, isUpdating } = props;\r\n  const { gamename } = store.getState().gameCredentials;\r\n  let GameSettings = undefined;\r\n  let GameView = undefined; \r\n  switch(gamename) {\r\n    case 'spyfall': {\r\n      GameSettings = SpyfallSettings;\r\n      GameView = SpyfallView; \r\n      break;\r\n    }\r\n    case 'mafia': {\r\n      GameSettings = MafiaSettings;\r\n      GameView = MafiaView;\r\n      break;\r\n    }\r\n    default: {\r\n      throw new Error('Not accepted game type');\r\n    }\r\n  }\r\n  return (\r\n    <Paper className=\"board-wrapper settings-board-wrapper\">\r\n      <div className=\"settings-header\">\r\n        <h1>Game Settings</h1>\r\n        {renderStatusMessage(isUpdating, canEdit)}\r\n      </div>\r\n      <div className=\"room-settings\">\r\n        {\r\n          canEdit \r\n          ? renderEditSettings(GameSettings, false)\r\n          : renderCurrentSettings(GameView)\r\n        }\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst SubscribedSettingsBoard = connect(mapStateToProps)(SettingsBoard);\r\nexport default SubscribedSettingsBoard;\r\n","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport './rulesBoard.scss';\r\n\r\nconst SpyfallRules = <ul>\r\n  <li>The spy, at any time, can reveal they are a spy and try and guess the location. If they are correct, they win! Otherwise, the players win. </li> \r\n  <li>Additionally, at any time, or after the round end timer goes off, any member can accuse a player of being a spy. \r\n  When this happens, a vote is made to see if every other player agrees with the accusation. \r\n  When voting, each player may also give a reason for their vote, or any other statement they may like.  \r\n  In a mid-round vote every player must agree unanimously for the accusation to stand, at which point the player is revealed. \r\n  If they are a spy, the team wins, if not, the spy wins. </li>\r\n  <li>If the game makes it to the end, the spy still may come forward before end-game voting is called to guess the location, at which point the same rules apply. \r\n  Once the final bell rings and players are called to vote, however, it is too late for the spy to win by guessing the location. </li>\r\n  <li>At the end of the game, the player with the most votes is revealed, if they are a spy, the team wins. If they are not, the spy wins!</li>\r\n  </ul>\r\n\r\nexport default function RulesBoard() {\r\n  return (\r\n    <Paper className=\"board-wrapper rules-board-wrapper\">\r\n      <div className=\"settings-header\">\r\n        <h1>Rules</h1>\r\n      </div>\r\n      {SpyfallRules}\r\n    </Paper>\r\n  )\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport Loading from 'components/Loading/loading';\r\nimport MyInput from './RoomInfoComponents/myInput';\r\nimport SubmitSettings from '../Settings/submitSettings';\r\nimport { joinRoom, getAvailableRooms, startGame } from '../socketHandlers';\r\nimport PrivateSwitch from 'Games/Settings/privateSwitch';\r\nimport SettingsBoard from 'Games/Settings/settingsBoard';\r\nimport RulesBoard from 'Games/Rules/rulesBoard';\r\n\r\nimport { lobbyStates } from 'redux-store/actions/gameSetupActions';\r\n\r\n\r\nfunction mapStateToPropsRI(state) {\r\n  const gd = state.gameData;\r\n  const gc = state.gameCredentials;\r\n  return {\r\n    username: gc.username,\r\n    gamename: gc.gamename,\r\n    isConnected: gc.isConnected,\r\n    selectedChoice: gd.selectedChoice,\r\n    isLoadingRoom: gd.isLoadingRoom,\r\n    members: gd.members,\r\n    spectators: gd.spectators,\r\n    isSpectator: gd.isSpectator,\r\n    roomId: gd.roomId,\r\n    myIndex: gd.myIndex,\r\n    rooms: gd.rooms,\r\n  };\r\n}\r\n\r\nfunction renderMembers(members, myIndex, spectators, isSpectator) {\r\n  if (members.length === 0) {\r\n    return (\r\n      <div className=\"members\">\r\n        <h3>Share your room id to let others join!</h3>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"members\">\r\n      <h3 className=\"others\">Other players</h3>\r\n      {\r\n        members.map((m, index) => {\r\n          if (index === 0) {\r\n            return '';\r\n          }\r\n          else {\r\n            return (\r\n              <h4 \r\n                className={index === myIndex && !isSpectator ? \"my-name\" : \"\"}\r\n                key={`${m}${index}`}>\r\n                  {m}\r\n              </h4>\r\n            );\r\n          }\r\n        })\r\n      }\r\n      {\r\n        spectators.length > 0 \r\n        ? (<>\r\n          <h3 className=\"others spectators\">Spectators</h3>\r\n          {\r\n            spectators.map((spectator, index) => {\r\n              return (\r\n                <h4 \r\n                className={index === myIndex && isSpectator ? \"my-name\" : \"\"}\r\n                key={`${spectator}${index}`}>\r\n                  {spectator}\r\n                </h4>\r\n              );\r\n            })\r\n          }\r\n          </>)\r\n        : ''\r\n      }\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nfunction renderAvailableRooms(rooms, isLoadingRoom) {\r\n  if (isLoadingRoom) {\r\n    return <Loading />;\r\n  }\r\n  if (rooms.length === 0) {\r\n    return <h3 className=\"no-avail-rooms\">Sorry. No other rooms were found at this time.</h3>\r\n  }\r\n  return rooms.map(room => {\r\n    return (\r\n      <Grid item key={room.hostname} xs={12} className=\"room\">\r\n        <Button className=\"data\" onClick={()=>{joinRoom(room.roomId)}}>\r\n          <h3 className=\"left\">\r\n            Host: &nbsp;\r\n            <span className=\"bold\">{room.hostname}</span>\r\n          </h3>\r\n          <h3 className=\"right\">\r\n            Number of Players: &nbsp;\r\n            <span className=\"bold\">{room.numPlayers}</span>\r\n          </h3>\r\n        </Button>\r\n      </Grid>\r\n    )\r\n  })\r\n}\r\n\r\nfunction renderStartButton(canEdit, numMembers) {\r\n  if (canEdit) {\r\n    if (numMembers > 0) {\r\n      return (\r\n        <Button variant=\"contained\" onClick={startGame} className=\"host-control-panel\">\r\n          Play\r\n        </Button>\r\n      );\r\n    }\r\n    else {\r\n      return <h4 className=\"ask-host\">Invite friends to your lobby to start!</h4>;\r\n    }\r\n  }\r\n  else {\r\n    return <h4 className=\"ask-host\">Ask the host to start the game!</h4>;\r\n  }\r\n}\r\n\r\nfunction RoomInfo(props) {\r\n  const { isConnected, selectedChoice, roomId, members, spectators, isSpectator, myIndex, rooms, isLoadingRoom } = props;\r\n  if (!isConnected || !selectedChoice) { return \"\"; }\r\n\r\n  function copyToClipboard(e) {\r\n    navigator.clipboard.writeText(roomId).then(() => {\r\n      console.log('copied');\r\n    })\r\n  }\r\n\r\n  if (selectedChoice === lobbyStates.CREATE) {\r\n    return (\r\n      <div className=\"room-settings\">\r\n        <div className=\"settings-wrapper\">\r\n          <PrivateSwitch />\r\n          <SubmitSettings isValid />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  else if(selectedChoice === lobbyStates.JOIN) {\r\n    return (\r\n      <div className=\"room-list\">\r\n        <div className=\"input\">\r\n          <h4>Enter the room id you would like to join:</h4>\r\n          <MyInput />\r\n        </div>\r\n        <div className=\"refresh-row\">\r\n          <h4>Otherwise, click on one of the available rooms to join.</h4>\r\n          <IconButton color=\"primary\" aria-label=\"refresh\" \r\n            onClick={getAvailableRooms}>\r\n            <RefreshIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Grid container spacing={3} className=\"rooms-wrapper\">\r\n          { renderAvailableRooms(rooms, isLoadingRoom) }\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n  else {\r\n    let hostClass = \"\";\r\n    let canEdit = selectedChoice === lobbyStates.CREATED;\r\n    if (canEdit) {\r\n      hostClass = \"my-name\";\r\n    }\r\n    return (\r\n      <div className=\"room-info\">\r\n        <SettingsBoard canEdit={canEdit}/>\r\n        <div className=\"room-title\">\r\n          <h2>Host: <span className={hostClass}>{members[0]}</span></h2>\r\n          <h2>Room id: <span className=\"roomId\" onClick={copyToClipboard}>{roomId}</span></h2>\r\n        </div>\r\n        <RulesBoard />\r\n        {renderStartButton(canEdit, members.length)}\r\n        {renderMembers(members, myIndex, spectators, isSpectator)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst SubscribedRoomInfo = connect(mapStateToPropsRI)(RoomInfo);\r\nexport default SubscribedRoomInfo;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport Loading from 'components/Loading/loading';\r\nimport { setSelectedChoiceAndLoadingRoom } from 'redux-store/actions/gameSetupActions';\r\nimport { getAvailableRooms, ejectFromRoom } from '../socketHandlers';\r\nimport { lobbyStates } from 'redux-store/actions/gameSetupActions';\r\n\r\nfunction setDisableProps(obj) {\r\n  obj.className += \" disabled\";\r\n  obj.variant = \"outlined\";\r\n}\r\n\r\nfunction ConnectedChoices(props) {\r\n  const { isConnected, selectedChoice, handleSelect } = props;\r\n  if (!isConnected) { return <Loading />; }\r\n\r\n  const createButtonProps = {\r\n    variant: \"contained\",\r\n    className: \"button\",\r\n    onClick: () => handleSelect(lobbyStates.CREATE),\r\n  };\r\n  const joinButtonProps = {\r\n    variant: \"contained\",\r\n    className: \"button\",\r\n    onClick: () => handleSelect(lobbyStates.JOIN),\r\n  };\r\n\r\n\r\n  if (selectedChoice === lobbyStates.CREATE || selectedChoice === lobbyStates.CREATED) {\r\n    setDisableProps(joinButtonProps);\r\n    delete createButtonProps.onClick;\r\n    createButtonProps.disableRipple = true;\r\n  }\r\n  else if (selectedChoice === lobbyStates.JOIN || selectedChoice === lobbyStates.JOINED) {\r\n    setDisableProps(createButtonProps);\r\n    delete joinButtonProps.onClick;\r\n    joinButtonProps.disableRipple = true;\r\n  }\r\n  return (\r\n    <div className=\"connected-choices\">\r\n      <Button \r\n        color=\"primary\"\r\n        disableElevation\r\n        {...createButtonProps}\r\n        >Create Room</Button>\r\n      <Button \r\n        color=\"primary\"\r\n        disableElevation\r\n        {...joinButtonProps}\r\n        >Join Room</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToPropsCC(state) {\r\n  return {\r\n    isConnected: state.gameCredentials.isConnected,\r\n    selectedChoice: state.gameData.selectedChoice,\r\n  }\r\n}\r\n\r\nfunction mapDispatchToPropsCC(dispatch) {\r\n  return {\r\n    handleSelect: (e) => {\r\n      if(e === lobbyStates.CREATE) {\r\n        ejectFromRoom();\r\n      }\r\n      if(e === lobbyStates.JOIN) {\r\n        getAvailableRooms();\r\n      }\r\n      dispatch(setSelectedChoiceAndLoadingRoom(e));\r\n    }\r\n  }\r\n}\r\nconst SubscribedConnectedChoices = connect(mapStateToPropsCC, mapDispatchToPropsCC)(ConnectedChoices);\r\nexport default SubscribedConnectedChoices;","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport './waitingRoom.scss';\r\n\r\nimport BackToGameSelect from 'components/BackToGameSelect/backToGameSelect';\r\nimport RoomInfo from './roomInfo';\r\nimport ConnectedChoices from './connectedChoices';\r\nimport { clearRoomInfo } from 'redux-store/actions/gameSetupActions';\r\nimport { connectToServer } from '../socketHandlers';\r\nimport store, { saveState } from 'redux-store';\r\n\r\n// const storageType = sessionStorage;\r\n\r\nfunction mapStateToPropsWR(state) {\r\n  const { gamename, username, isConnected } = state.gameCredentials\r\n  return {\r\n    gamename,\r\n    username,\r\n    isConnected,\r\n    isPlaying: state.gameData.isPlaying,\r\n  };\r\n}\r\n\r\nfunction WaitingRoom(props) {\r\n  const { gamename, username, isConnected, isPlaying } = props;\r\n  \r\n  useEffect(() => {\r\n    if (!isConnected) {\r\n      connectToServer();\r\n    }\r\n  }, [isConnected, username]);\r\n\r\n  useEffect(() => {\r\n    saveState(store.getState());\r\n  }, [username]);\r\n\r\n  if(!gamename) {\r\n    store.dispatch(clearRoomInfo());\r\n    return <Redirect to=\"/games\" />;\r\n  }\r\n\r\n  if (isPlaying) {\r\n    // storageType.setItem('gameData', JSON.stringify(store.getState().gameData));\r\n    return (\r\n      <Redirect to={`/games/${gamename}/play`} />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"wrapper waiting-room-wrapper\">\r\n      <div className=\"header\">\r\n        <div className=\"header-row\">\r\n          <BackToGameSelect/>\r\n          <h1>Play {gamename}</h1>\r\n        </div>\r\n        <h3>Your name is: {username}</h3>\r\n      </div>\r\n      <ConnectedChoices />\r\n\r\n      <RoomInfo\r\n        username={username}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nconst SubscribedWaitingRoom = connect(mapStateToPropsWR)(WaitingRoom);\r\nexport default SubscribedWaitingRoom;","import React from 'react';\r\nimport { HashRouter, Route, Switch, Redirect } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport Testing from 'pages/testing'\r\n// eslint-disable-next-line\r\nimport MainPage from 'pages/MainPage/mainPage';\r\nimport Games from 'pages/games';\r\nimport Spyfall from 'Games/Spyfall';\r\nimport Mafia from 'Games/Mafia';\r\nimport WaitingRoom from 'Games/WaitingRoom/waitingRoom';\r\nimport BackToLobby from 'components/BackToLobby/backToLobby';\r\nimport store from 'redux-store';\r\n\r\nimport './App.css';\r\n\r\nimport { ThemeProvider } from '@material-ui/core';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport green from '@material-ui/core/colors/green';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: blue,\r\n    secondary: green,\r\n  },\r\n  status: {\r\n    danger: 'orange',\r\n  },\r\n});\r\n\r\n\r\n// function ComebackGame(props) {\r\n//   const { match: {params}} = props;\r\n//   return <div>\r\n//     <h1>\r\n//       <span style={{textTransform: \"uppercase\"}}>{params.name}</span> is not yet built. Come back soon.\r\n//       </h1>\r\n//   </div>;\r\n// }\r\n\r\nfunction App() {  \r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n    <Provider store={store}>\r\n    <HashRouter basename=\"/\">\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Games} />\r\n          <Route path=\"/testing\" component={Testing} /> \r\n          <Route path=\"/testcomponent\" component={BackToLobby} />\r\n\r\n          <Route path=\"/games/mafia/play\" component={Mafia} />\r\n          <Route path=\"/games/spyfall/play\" component={Spyfall} />\r\n          <Route path=\"/games/:name\" component={WaitingRoom} />\r\n          \r\n          <Route path=\"/games\" component={Games} />\r\n\r\n          <Route>\r\n            <Redirect to=\"/\" />\r\n          </Route>\r\n        </Switch>\r\n    </HashRouter>\r\n    </Provider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}